(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4665],{5783:function(e,t,r){Promise.resolve().then(r.bind(r,8657))},8657:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var a=r(9268),n=r(4406),s=r(6008),o=r(6006),i=r(1712),l=r(9700),c=r(2985),d=r(3938),u=e=>{let{register:t,errors:r,control:n,watch:s,setValue:o}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Z,{label:"Email",name:"email",register:t,required:!0,minLength:2,errors:r.email,addClass:"col-span-4",type:"email",labelCss:"text-font-1"}),(0,a.jsx)(d.Z,{label:"Password",name:"password",register:t,required:!0,minLength:3,errors:r.password,addClass:"w-[100%] mt-2",type:"password",labelCss:"text-font-1"})]})},m=r(366),p=r(593),x=e=>{let{setLogin:t,cekToken:r}=(0,n.Z)(),c=(0,s.useRouter)(),[d,x]=(0,o.useState)(""),[h,f]=(0,o.useState)(!1),v=async()=>{let e=i.Z.get("token");if(e){var t,a,n;let e=await r();if(console.log({cekAuth:e}),!(null==e?void 0:e.error)){let r=null==e?void 0:null===(n=e.data)||void 0===n?void 0:null===(a=n.data)||void 0===a?void 0:null===(t=a.user)||void 0===t?void 0:t.role;return"dosen"!==r?c.push("/admin/dashboard"):c.push("/dosen/dashboard")}}f(!1)};(0,o.useEffect)(()=>{v()},[]);let{register:g,setValue:b,control:y,watch:k,handleSubmit:j,formState:{errors:w}}=(0,l.cI)(),N=async e=>{var r;f(!0),x("");let a=await t(e);if(null==a?void 0:a.error)x(null==a?void 0:null===(r=a.error)||void 0===r?void 0:r.pesan);else{let{data:e}=a;return(i.Z.set("token",e.token),i.Z.set("role",e.role),i.Z.set("email",e.email),"dosen"!==e.role)?c.push("/admin/dashboard"):c.push("/dosen/dashboard")}setTimeout(()=>{f(!1)},1e3)};return(0,a.jsx)("div",{className:"min-h-screen bg-login bg-cover bg-center font-prompt",children:(0,a.jsx)("div",{className:"flex flex-col items-center min-h-screen justify-center backdrop-blur-sm z-10",children:(0,a.jsxs)("div",{className:"bg-white/10 text-font-1 rounded py-8 px-4 mx-6 md:py-8 md:px-12 flex flex-col items-center justify-center z-50",children:[(0,a.jsxs)("div",{className:"w-full mb-2",children:[(0,a.jsx)("h5",{className:"text-sm font-bold text-center sm:text-lg",children:"Selamat datang di"}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-center tracking-[0.1em] sm:text-3xl",children:"SILAKU"}),(0,a.jsx)("p",{className:"text-center mt-2 text-xs sm:text-base",children:"(Sistem Informasi Perkuliahan Fakultas Sains & Teknologi)"}),(0,a.jsx)("span",{children:d&&(0,a.jsx)("p",{className:"text-red-600 text-center",children:d})})]}),(0,a.jsx)("img",{className:"rounded-full h-32 w-32 my-6",src:"https://ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"user avatar"}),(0,a.jsx)("p",{className:"text-center mt-2 text-[10px] text-gray-400 sm:text-sm",children:"Silakan login untuk mendapatkan akses ke halaman admin"}),(0,a.jsxs)("form",{onSubmit:j(N),className:"mt-8 w-full",children:[(0,a.jsx)(u,{register:g,errors:w,control:y,watch:k,setValue:b}),(0,a.jsx)("div",{className:"mt-4",children:h?(0,a.jsx)(p.Z,{}):(0,a.jsx)(m.Z,{text:"Login",onClick:j(N)})})]})]})})})}},366:function(e,t,r){"use strict";var a=r(9268);r(6006),t.Z=e=>{let{text:t,onClick:r,addClass:n}=e;return(0,a.jsx)("button",{onClick:r,className:"bg-primary rounded-lg px-4 py-2 text-white w-fit cursor-pointer hover:shadow-sm hover:shadow-primary ".concat(n),children:t})}},2985:function(e,t,r){"use strict";var a=r(9268);r(6006),t.Z=e=>{let{label:t,register:r,required:n,name:s,minLength:o,maxLength:i,errors:l,valueAsNumber:c,type:d="text",readOnly:u,placeholder:m,autoComplete:p="on",addClass:x,value:h,labelCss:f="text-gray-700"}=e;return(0,a.jsxs)("div",{className:x,children:[(0,a.jsx)("label",{htmlFor:s,className:"text-sm tracking-wide ".concat(f),children:t}),n&&(0,a.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("input",{className:"".concat(u&&"cursor-not-allowed bg-gray-100"," w-full text-base px-4 py-2 border text-gray-700 border-gray-300 rounded-lg focus:outline-none focus:border-secondary"),type:d,id:s,readOnly:u,placeholder:m,autoComplete:p,...r(s,{required:n,minLength:o,maxLength:i,valueAsNumber:c}),value:h})}),(null==l?void 0:l.type)==="required"&&(0,a.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kosong"]}),(null==l?void 0:l.type)==="minLength"&&(0,a.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kurang dari ",o," karakter"]}),(null==l?void 0:l.type)==="maxLength"&&(0,a.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh lebih dari ",i," karakter"]}),(null==l?void 0:l.type)==="pattern"&&(0,a.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," hanya boleh angka."]})]})}},3938:function(e,t,r){"use strict";var a=r(9268),n=r(6006),s=r(8136);t.Z=e=>{let{label:t,register:r,required:o,name:i,minLength:l,maxLength:c,errors:d,valueAsNumber:u,type:m="text",readOnly:p,placeholder:x,autoComplete:h="on",addClass:f,value:v,labelCss:g="text-gray-700"}=e,[b,y]=(0,n.useState)(!1);return(0,a.jsxs)("div",{className:f,children:[(0,a.jsx)("label",{htmlFor:i,className:"text-sm tracking-wide ".concat(g),children:t}),o&&(0,a.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{className:"w-full text-base text-gray-700 px-4 py-2 border  border-gray-300 rounded-lg focus:outline-none focus:border-secondary",type:"password"===m?b?"text":"password":m,id:i,readOnly:p,placeholder:x,autoComplete:h,...r(i,{required:o,minLength:l,maxLength:c,valueAsNumber:u}),value:v}),"password"===m&&(0,a.jsx)("div",{className:"absolute right-2 top-0 flex items-center h-full cursor-pointer text-secondary",onClick:()=>{y(!b)},children:b?(0,a.jsx)(s.rCC,{size:20}):(0,a.jsx)(s.I$m,{size:20})})]}),(null==d?void 0:d.type)==="required"&&(0,a.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kosong"]}),(null==d?void 0:d.type)==="minLength"&&(0,a.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kurang dari ",l," karakter"]}),(null==d?void 0:d.type)==="maxLength"&&(0,a.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh lebih dari ",c," karakter"]}),(null==d?void 0:d.type)==="pattern"&&(0,a.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," hanya boleh angka."]})]})}},593:function(e,t,r){"use strict";var a=r(9268);r(6006),t.Z=()=>(0,a.jsx)("div",{className:"w-12 h-12 rounded-full animate-spin border-y border-solid border-secondary border-t-transparent shadow-md"})},3415:function(e,t,r){"use strict";r.d(t,{I8:function(){return s},Sj:function(){return o},VF:function(){return l},_n:function(){return n},hi:function(){return i}});var a=r(4214);let n="https://back.silaku.fstuogp.com",s=a.Z.create({baseURL:"".concat(n,"/auth")}),o=a.Z.create({baseURL:"".concat(n,"/crud")}),i=a.Z.create({baseURL:"".concat(n,"/api")});a.Z.create({baseURL:"".concat(n,"/storage")});let l=a.Z.create({baseURL:"".concat("https://back.edom.fstuogp.com","/api")})},4406:function(e,t,r){"use strict";var a=r(2561),n=r(4475),s=r(3415),o=r(1712);let i=(0,a.Ue)((0,n.mW)((e,t)=>({dtLogin:[],setToken:async()=>{let e=o.Z.get("token");return e},setLogin:async e=>{try{let t=await (0,s.I8)({method:"post",url:"/login",data:e});return{status:"success",data:t.data}}catch(e){return{status:"error",error:e.response.data}}},cekToken:async()=>{let r=await t().setToken();try{let t=await (0,s.I8)({method:"post",url:"/cek-token",headers:{Authorization:"Bearer ".concat(r)}});return e(e=>({...e,dtLogin:t.data.data})),{status:"success",data:t.data}}catch(e){return{status:"error",error:e.response.data}}},setUpdate:async(r,a)=>{try{let n=await t().setToken(),o=await (0,s.I8)({method:"post",url:"/update/".concat(r),headers:{Authorization:"Bearer ".concat(n)},data:a});return e(e=>({...e,dtLogin:o.data.data})),{status:"success",data:o.data}}catch(e){return console.log(e.response.data),{status:"error",data:e.response.data}}}})));t.Z=i},6008:function(e,t,r){e.exports=r(4e3)},3270:function(e,t,r){"use strict";r.d(t,{w_:function(){return l}});var a=r(6006),n={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},s=a.createContext&&a.createContext(n),o=function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},i=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)0>t.indexOf(a[n])&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r};function l(e){return function(t){return a.createElement(c,o({attr:o({},e.attr)},t),function e(t){return t&&t.map(function(t,r){return a.createElement(t.tag,o({key:r},t.attr),e(t.child))})}(e.child))}}function c(e){var t=function(t){var r,n=e.attr,s=e.size,l=e.title,c=i(e,["attr","size","title"]),d=s||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),a.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,c,{className:r,style:o(o({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),l&&a.createElement("title",null,l),e.children)};return void 0!==s?a.createElement(s.Consumer,null,function(e){return t(e)}):t(n)}},1712:function(e,t,r){"use strict";/*! js-cookie v3.0.5 | MIT */function a(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)e[a]=r[a]}return e}r.d(t,{Z:function(){return n}});var n=function e(t,r){function n(e,n,s){if("undefined"!=typeof document){"number"==typeof(s=a({},r,s)).expires&&(s.expires=new Date(Date.now()+864e5*s.expires)),s.expires&&(s.expires=s.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var i in s)s[i]&&(o+="; "+i,!0!==s[i]&&(o+="="+s[i].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+o}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],a={},n=0;n<r.length;n++){var s=r[n].split("="),o=s.slice(1).join("=");try{var i=decodeURIComponent(s[0]);if(a[i]=t.read(o,i),e===i)break}catch(e){}}return e?a[e]:a}},remove:function(e,t){n(e,"",a({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,a({},this.attributes,t))},withConverter:function(t){return e(a({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}},function(e){e.O(0,[6680,4288,9700,9253,7698,1744],function(){return e(e.s=5783)}),_N_E=e.O()}]);