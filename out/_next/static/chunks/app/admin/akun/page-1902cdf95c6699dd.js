(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3047],{3897:function(e,t,a){Promise.resolve().then(a.bind(a,4405))},4405:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return L}});var r=a(9268),s=a(366),n=a(2985),l=a(9442),i=a(6006),o=a(9700),d=a(3938);a(6760);var c=e=>{let{register:t,errors:a,control:s,watch:l,setValue:i,dtLogin:o}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.Z,{label:"Email",name:"email",register:t,required:!0,minLength:3,errors:a.email,type:"email",addClass:"col-span-4 lg:col-span-3",readOnly:!0}),(0,r.jsx)(d.Z,{label:"Password",name:"password",register:t,required:!0,minLength:3,errors:a.password,type:"password",addClass:"col-span-4 lg:col-span-3"}),(0,r.jsx)(d.Z,{label:"Konfirmasi Password",name:"confirmPwd",register:t,required:!0,minLength:3,errors:a.confirmPwd,type:"password",addClass:"col-span-4 lg:col-span-3"})]})},u=a(593),m=a(4406),x=a(6110),h=a(8039),p=e=>{let{dtLogin:t,cekToken:a}=e;(0,i.useEffect)(()=>(a(),()=>{}),[a]);let[d,p]=(0,i.useState)(!1),{setUpdate:f}=(0,m.Z)(),g=h.Ry().shape({password:h.Z_().min(3,"Password harus lebih dari 3 karakter"),confirmPwd:h.Z_().oneOf([h.iH("password")],"Konfirmasi Password tidak sama"),email:h.Z_().email("Email tidak valid")}),{register:v,handleSubmit:b,setValue:j,control:w,formState:{errors:y},watch:k}=(0,o.cI)({resolver:(0,x.X)(g)}),N=()=>{var e;j("email",null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.email),j("password",""),j("confirmPwd","")};(0,i.useEffect)(()=>{N()},[t]);let Z=async e=>{var r;let s=null==t?void 0:null===(r=t.user)||void 0===r?void 0:r.id;p(!0),console.log({row:e});let{data:n}=await f(s,e);console.log({data:n}),(0,l.Z)({event:n}),(null==n?void 0:n.type)!=="success"||N(),a(),setTimeout(()=>{p(!1)},1500)};return(0,r.jsxs)("form",{onSubmit:b(Z),children:[(0,r.jsx)(n.Z,{name:"id",register:v,type:"hidden"}),(0,r.jsx)("div",{className:"grid grid-cols-1 gap-2 mb-4",children:(0,r.jsx)(c,{register:v,errors:y,control:w,watch:k,setValue:j,dtLogin:t})}),(0,r.jsx)("div",{children:d?(0,r.jsx)(u.Z,{}):(0,r.jsx)(s.Z,{text:"Simpan",onClick:b(Z)})})]})},f=a(8919),g=a(7808),v=a(722),b=a(8860),j=a(2561),w=a(4475),y=a(3415);let k=(0,j.Ue)((0,w.mW)((e,t)=>({dtParafProdi:[],showParafProdi:[],setParafProdi:async t=>{let{page:a=1,limit:r=10,prodi_id:s}=t;try{let t=await m.Z.getState().setToken(),n=await (0,y.Sj)({method:"get",url:"/parafProdi",headers:{Authorization:"Bearer ".concat(t)},params:{limit:r,page:a,prodi_id:s}});return e(e=>({...e,dtParafProdi:n.data.data})),{status:"berhasil",data:n.data}}catch(e){var n;return{status:"error",error:null===(n=e.response)||void 0===n?void 0:n.data}}},addData:async e=>{try{let a=await m.Z.getState().setToken(),r=await (0,y.Sj)({method:"post",url:"/parafProdi",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"multipart/form-data"},data:e});return t().setParafProdi({prodi_id:e.prodi_id}),{status:"berhasil tambah",data:r.data}}catch(e){return{status:"error",data:e.response.data}}}})));var N=a(6394),Z=a.n(N),C=a(1712),P=e=>{let{}=e,{addData:t,dtParafProdi:a,setParafProdi:n}=k(),[d,c]=(0,i.useState)(!1),[m,x]=(0,i.useState)(!1),[h,p]=(0,i.useState)(""),f=parseInt(C.Z.get("prodi_id")||""),j=(0,i.useCallback)(async()=>{await n({prodi_id:f})},[n,f]);(0,i.useEffect)(()=>{f&&j()},[j,f]);let{register:w,handleSubmit:N,setValue:P,control:L,formState:{errors:S},watch:_,reset:T}=(0,o.cI)(),E=async e=>{e.prodi_id=f,console.log({row:e}),(0,v.Z)({addData:t,row:e,setShowModal:c,setIsLoading:x,toastShow:l.Z}),c(!1)};return(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row border-b border-primary/[0.2] gap-2 mb-8 pb-2 items-center",children:[(0,r.jsx)("div",{className:"flex gap-2",children:(0,r.jsx)(s.Z,{text:"Paraf",addClass:"self-end",onClick:()=>{c(!0),p("Prodi")}})}),(0,r.jsx)("div",{className:"flex gap-2",children:a&&a.map(e=>(0,r.jsx)(Z(),{alt:"paraf",src:"".concat(y._n,"/").concat(e.paraf),width:100,height:100},e.id))}),(0,r.jsxs)(g.Z,{title:"Paraf",showModal:d,setShowModal:c,width:"300px",children:[(0,r.jsx)("div",{children:(0,r.jsx)(b.Z,{control:L,name:"paraf",label:"Paraf ".concat(h),required:!0,errors:S.paraf,setValue:P,clear:!0})}),(0,r.jsx)("div",{className:"flex gap-4 mt-4",children:m?(0,r.jsx)(u.Z,{}):(0,r.jsx)(s.Z,{text:"Simpan",onClick:N(E)})})]})]})},L=e=>{var t;let{cekToken:a,dtLogin:s}=(0,m.Z)();return(0,r.jsxs)("div",{className:"flex flex-col h-full w-full",children:[(null==s?void 0:null===(t=s.user)||void 0===t?void 0:t.role)==="prodi"&&(0,r.jsx)(P,{}),(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)("p",{children:"Silahkan mengubah data akun anda pada form dibawah ini. Masukanlah email dan password yang baru jika anda ingin mengubahnya."})}),(0,r.jsx)(f.Toaster,{}),(0,r.jsxs)("div",{className:"lg:mx-10",children:[" ",(0,r.jsx)(p,{dtLogin:s,cekToken:a})]})]})}},366:function(e,t,a){"use strict";var r=a(9268);a(6006),t.Z=e=>{let{text:t,onClick:a,addClass:s}=e;return(0,r.jsx)("button",{onClick:a,className:"bg-primary rounded-lg px-4 py-2 text-white w-fit cursor-pointer hover:shadow-sm hover:shadow-primary ".concat(s),children:t})}},8860:function(e,t,a){"use strict";a.d(t,{Z:function(){return d}});var r=a(9268),s=a(6006),n=a(9700),l=a(3371),i=a.n(l),o=e=>{let{text:t,onClick:a,addClass:s}=e;return(0,r.jsx)("button",{onClick:a,className:"bg-secondary rounded-lg px-4 py-2 text-white w-fit cursor-pointer hover:shadow-sm hover:shadow-secondary ".concat(s),children:t})},d=e=>{let{control:t,required:a,name:l,errors:d,addClass:c,label:u,clear:m=!1,setValue:x}=e,h=(0,s.useRef)(null),p=e=>e?e.getTrimmedCanvas().toDataURL("image/png"):null;return(0,r.jsxs)("div",{className:c,children:[(0,r.jsxs)("label",{className:"text-sm font-medium text-gray-700 tracking-wide block",children:[u,a&&(0,r.jsx)("span",{className:"ml-1 text-red-600 ",children:"*"})]}),(0,r.jsx)(n.Qr,{name:l,control:t,rules:{required:a},render:e=>{let{field:t}=e;return(0,r.jsx)(i(),{penColor:"black",canvasProps:{className:"sigCanvas border border-primary w-full rounded-xl"},ref:e=>{h.current=e},onEnd:()=>t.onChange(p(h.current))})}}),m&&(0,r.jsx)(o,{text:"Hapus ".concat(u),onClick:()=>{h.current&&(x(l,""),h.current.clear())},addClass:"mt-2"}),(null==d?void 0:d.type)==="required"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[u," tidak boleh kosong"]})]})}},2985:function(e,t,a){"use strict";var r=a(9268);a(6006),t.Z=e=>{let{label:t,register:a,required:s,name:n,minLength:l,maxLength:i,errors:o,valueAsNumber:d,type:c="text",readOnly:u,placeholder:m,autoComplete:x="on",addClass:h,value:p,labelCss:f="text-gray-700"}=e;return(0,r.jsxs)("div",{className:h,children:[(0,r.jsx)("label",{htmlFor:n,className:"text-sm tracking-wide ".concat(f),children:t}),s&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)("input",{className:"".concat(u&&"cursor-not-allowed bg-gray-100"," w-full text-base px-4 py-2 border text-gray-700 border-gray-300 rounded-lg focus:outline-none focus:border-secondary"),type:c,id:n,readOnly:u,placeholder:m,autoComplete:x,...a(n,{required:s,minLength:l,maxLength:i,valueAsNumber:d}),value:p})}),(null==o?void 0:o.type)==="required"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kosong"]}),(null==o?void 0:o.type)==="minLength"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kurang dari ",l," karakter"]}),(null==o?void 0:o.type)==="maxLength"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh lebih dari ",i," karakter"]}),(null==o?void 0:o.type)==="pattern"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," hanya boleh angka."]})]})}},3938:function(e,t,a){"use strict";var r=a(9268),s=a(6006),n=a(8136);t.Z=e=>{let{label:t,register:a,required:l,name:i,minLength:o,maxLength:d,errors:c,valueAsNumber:u,type:m="text",readOnly:x,placeholder:h,autoComplete:p="on",addClass:f,value:g,labelCss:v="text-gray-700"}=e,[b,j]=(0,s.useState)(!1);return(0,r.jsxs)("div",{className:f,children:[(0,r.jsx)("label",{htmlFor:i,className:"text-sm tracking-wide ".concat(v),children:t}),l&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{className:"w-full text-base text-gray-700 px-4 py-2 border  border-gray-300 rounded-lg focus:outline-none focus:border-secondary",type:"password"===m?b?"text":"password":m,id:i,readOnly:x,placeholder:h,autoComplete:p,...a(i,{required:l,minLength:o,maxLength:d,valueAsNumber:u}),value:g}),"password"===m&&(0,r.jsx)("div",{className:"absolute right-2 top-0 flex items-center h-full cursor-pointer text-secondary",onClick:()=>{j(!b)},children:b?(0,r.jsx)(n.rCC,{size:20}):(0,r.jsx)(n.I$m,{size:20})})]}),(null==c?void 0:c.type)==="required"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kosong"]}),(null==c?void 0:c.type)==="minLength"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kurang dari ",o," karakter"]}),(null==c?void 0:c.type)==="maxLength"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh lebih dari ",d," karakter"]}),(null==c?void 0:c.type)==="pattern"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," hanya boleh angka."]})]})}},593:function(e,t,a){"use strict";var r=a(9268);a(6006),t.Z=()=>(0,r.jsx)("div",{className:"w-12 h-12 rounded-full animate-spin border-y border-solid border-secondary border-t-transparent shadow-md"})},7808:function(e,t,a){"use strict";var r=a(9268);a(6006);var s=a(8136);t.Z=e=>{let{showModal:t,setShowModal:a,children:n,title:l,width:i=""}=e;return(0,r.jsx)("div",{className:"",children:t&&(0,r.jsx)("div",{className:"fixed inset-0 z-50 mx-auto flex justify-center bg-black/[0.2]",children:(0,r.jsxs)("div",{className:"bg-white p-5 rounded-xl w-[500px] h-min mt-[10%] max-h-[70%] overflow-hidden flex flex-col lg:w-[700px]",style:{width:i},children:[(0,r.jsxs)("div",{className:"flex flex-row items-center justify-between border-b border-primary/[0.2] mb-4 pb-2",children:[(0,r.jsx)("h5",{className:"text-xl font-roboto",children:l}),(0,r.jsx)(s.C7Q,{className:"cursor-pointer hover:text-primary",onClick:()=>a(!1)})]}),(0,r.jsx)("div",{className:"overflow-auto",children:n})]})})})}},3415:function(e,t,a){"use strict";a.d(t,{I8:function(){return n},Sj:function(){return l},VF:function(){return o},_n:function(){return s},hi:function(){return i}});var r=a(4214);let s="https://back.silaku.fstuogp.com",n=r.Z.create({baseURL:"".concat(s,"/auth")}),l=r.Z.create({baseURL:"".concat(s,"/crud")}),i=r.Z.create({baseURL:"".concat(s,"/api")});r.Z.create({baseURL:"".concat(s,"/storage")});let o=r.Z.create({baseURL:"".concat("https://back.edom.fstuogp.com","/api")})},722:function(e,t,a){"use strict";async function r(e){let{row:t,dtEdit:a,setIsLoading:r,setShowModal:s,addData:n,updateData:l,resetForm:i,toastShow:o}=e;if(r(!0),a){t.dosen=!0;let{data:e}=await l(a.id,t);o({event:e}),s(!1)}else{let{data:e}=await n(t);console.log({data:e}),o({event:e}),(null==e?void 0:e.type)!=="success"||i&&i()}r(!1)}a.d(t,{Z:function(){return r}})},4406:function(e,t,a){"use strict";var r=a(2561),s=a(4475),n=a(3415),l=a(1712);let i=(0,r.Ue)((0,s.mW)((e,t)=>({dtLogin:[],setToken:async()=>{let e=l.Z.get("token");return e},setLogin:async e=>{try{let t=await (0,n.I8)({method:"post",url:"/login",data:e});return{status:"success",data:t.data}}catch(e){return{status:"error",error:e.response.data}}},cekToken:async()=>{let a=await t().setToken();try{let t=await (0,n.I8)({method:"post",url:"/cek-token",headers:{Authorization:"Bearer ".concat(a)}});return e(e=>({...e,dtLogin:t.data.data})),{status:"success",data:t.data}}catch(e){return{status:"error",error:e.response.data}}},setUpdate:async(a,r)=>{try{let s=await t().setToken(),l=await (0,n.I8)({method:"post",url:"/update/".concat(a),headers:{Authorization:"Bearer ".concat(s)},data:r});return e(e=>({...e,dtLogin:l.data.data})),{status:"success",data:l.data}}catch(e){return console.log(e.response.data),{status:"error",data:e.response.data}}}})));t.Z=i},9442:function(e,t,a){"use strict";var r=a(8919);t.Z=e=>{let{event:t,position:a}=e;switch(t.type){case"success":r.default.success(t.message,{duration:4e3,position:a});break;case"error":r.default.error(t.message,{duration:4e3,position:a})}}}},function(e){e.O(0,[6680,4288,2772,1092,3088,295,3371,9253,7698,1744],function(){return e(e.s=3897)}),_N_E=e.O()}]);