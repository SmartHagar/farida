(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2648],{3052:function(e,a,l){Promise.resolve().then(l.bind(l,8078))},8078:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return y}});var t=l(9268),s=l(6006),r=l(593),n=l(6008),i=l(5326),d=l.n(i),u=e=>{let{headTable:a,dataTable:l,limit:s,page:r}=e,n=e=>(r-1)*s+e+1;return(0,t.jsxs)("table",{className:"w-full border-collapse text-left",children:[(0,t.jsx)("thead",{className:"",children:(0,t.jsx)("tr",{children:a&&a.map((e,a)=>(0,t.jsx)("th",{scope:"col",className:"px-6 py-4",children:e},a))})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-100 border-t border-gray-100 ",children:l&&l.map((e,a)=>{let l=!e.rps||!e.berita_acara||!e.absen||!e.nilai,s=[e.rps&&"RPS",e.berita_acara&&"BERITA ACARA",e.absen&&"ABSEN",e.nilai&&"NILAI"].filter(Boolean);return(0,t.jsxs)("tr",{className:l?"bg-red-100":"",children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap capitalize",children:n(a)}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap capitalize",children:s.join(", ")}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap capitalize",children:e.dosen.nama}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap capitalize",children:e.hari}),(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap capitalize",children:[d()(e.mulai,"HH:mm:ss").format("HH:mm")," -",d()(e.seles,"HH:mm:ss").format("HH:mm")]}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap capitalize",children:e.matkul.nama})]},a)})})]})},c=l(2775),o=l(1468),m=l(1712),h=l(9947),p=l(2766),f=l(9114),x=l(4803),j=e=>{let{setDelete:a,setEdit:l,search:i,tahunWatch:d,semesterWatch:j}=e;(0,n.useSearchParams)();let{setShowAbsen:w,showAbsen:b}=(0,c.Z)(),{setShowNilai:g,showNilai:v}=(0,h.Z)(),{setShowBeritaAcara:N,showBeritaAcara:y}=(0,f.Z)(),{setShowRps:k,showRps:S}=(0,x.Z)(),{setByTahunSemester:C,dtJadwal:_}=(0,o.Z)(),[E,Z]=(0,s.useState)(1),[H,O]=(0,s.useState)(10),[I,P]=(0,s.useState)(!0),[T,z]=(0,s.useState)(),A=m.Z.get("prodi_id"),J=async()=>{P(!0),await C({search:i,tahun:d,semester:j,prodi_id:A}),P(!1)};(0,s.useMemo)(()=>d&&j&&J(),[d,j,A]),(0,s.useEffect)(()=>{(0,p.Ow)({dtJadwal:_,setShowAbsen:w}),(0,p.z9)({dtJadwal:_,setShowNilai:g}),(0,p.iq)({dtJadwal:_,setShowBeritaAcara:N}),(0,p.cA)({dtJadwal:_,setShowRps:k})},[JSON.stringify(_)]);let L=(e,a,l,t,s)=>{P(!0);let r=null==e?void 0:e.map(e=>{let r=null==a?void 0:a.find(a=>parseInt(a.jadwal_id)===e.id),n=null==l?void 0:l.find(a=>parseInt(a.jadwal_id)===e.id),i=null==t?void 0:t.find(a=>parseInt(a.berita_acara.jadwal_id)===e.id),d=null==s?void 0:s.find(a=>parseInt(a.jadwal_id)===e.id);return n||r||i||d?{...e,nilai:n,absen:r,berita_acara:i,rps:d}:null}).filter(e=>null!==e);z({data:r}),P(!1)};return(0,s.useEffect)(()=>{let e=(null==T?void 0:T.originalData)||(null==T?void 0:T.data),a=e;""!==i.trim()&&(a=null==e?void 0:e.filter(e=>e.jadwal.hari.toLowerCase().includes(i.toLowerCase())||e.jadwal.matkul.nama.toLowerCase().includes(i.toLowerCase())||e.jadwal.matkul.kode.toLowerCase().includes(i.toLowerCase())));let l={data:a,originalData:e};z(l)},[i]),(0,s.useEffect)(()=>{_.length>0&&L(_,b,v,y,S)},[JSON.stringify(b),JSON.stringify(_),JSON.stringify(v),JSON.stringify(y),JSON.stringify(S)]),(0,t.jsx)("div",{className:"flex-1 flex-col max-w-full h-full overflow-auto",children:I?(0,t.jsx)(r.Z,{}):(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:"",children:(0,t.jsx)(u,{headTable:["No","Kelengkapan","Dosen","Hari","Jam","Mata Kuliah"],dataTable:T.data,page:E,limit:H})})})})},w=l(8919),b=l(8350),g=l(1281),v=l(4439),N=l(9700),y=()=>{let e=(0,n.useRouter)(),a=(0,n.useSearchParams)(),[l,r]=(0,s.useState)(""),{register:i,control:d,formState:{errors:u},watch:c,setValue:o}=(0,N.cI)(),m=c("tahun"),h=c("semester"),p=a.get("tahun"),f=a.get("semester");return(0,s.useEffect)(()=>{if(p||f)o("tahun",parseInt(p||"")),o("semester",f);else{let a=new Date().getFullYear(),l="Genap";o("tahun",a),o("semester",l),e.push("/admin/kelengkapan?tahun="+a+"&semester="+l)}return()=>{}},[]),(0,s.useEffect)(()=>(m&&h&&e.push("/admin/kelengkapan?tahun="+m+"&semester="+h),()=>{}),[m,h]),(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(w.Toaster,{}),(0,t.jsx)("div",{className:"mb-4 flex justify-between",children:(0,t.jsx)("p",{children:"Kelengkapan Berkas"})}),(0,t.jsxs)("div",{className:"mb-4 flex justify-between gap-4",children:[(0,t.jsx)(g.u,{label:"Semester",defaultOption:"Pilih Semester",register:i,errors:u,name:"semester",options:[{value:"Ganjil",label:"Ganjil"},{value:"Genap",label:"Genap"}],addClass:"w-full"}),(0,t.jsx)(v.Z,{label:"Tahun",name:"tahun",placeholder:"Pilih Tahun",start:new Date().getFullYear()-2,end:new Date().getFullYear(),fromMax:!0,control:d,required:!0,errors:u,addClass:"w-full"})]}),(0,t.jsx)(b.Z,{placeholder:"Cari Hari",onChange:e=>r(e)})]}),(0,t.jsx)(j,{setEdit:()=>{},search:l,tahunWatch:m,semesterWatch:h})]})}},8350:function(e,a,l){"use strict";var t=l(9268);l(6006),a.Z=e=>{let{placeholder:a,addClass:l,onChange:s,defaultValue:r=""}=e;return(0,t.jsx)("div",{className:l,children:(0,t.jsx)("input",{className:"w-full text-gray-700 px-4 py-2 border  border-gray-300 rounded-lg focus:outline-none focus:border-secondary",placeholder:a,onChange:e=>{s(e.target.value)},defaultValue:r})})}},1281:function(e,a,l){"use strict";l.d(a,{u:function(){return s}});var t=l(9268);l(6006);let s=e=>{let{label:a,register:l,required:s,name:r,placeholder:n,defaultOption:i,options:d=[],errors:u,addClass:c}=e;return(0,t.jsxs)("div",{className:c,children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:a}),s&&(0,t.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,t.jsx)("div",{className:"relative",children:(0,t.jsxs)("select",{className:"w-full rounded-lg py-2 px-2 bg-white border border-gray-300 focus:outline-none focus:border-secondary",id:a,placeholder:n,...l(r,{required:s}),children:[(0,t.jsx)("option",{value:"",children:i}),d.map((e,a)=>(0,t.jsx)("option",{value:e.value,children:e.label},a))]})}),(null==u?void 0:u.type)==="required"&&(0,t.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[a," tidak boleh kosong"]})]})}},4439:function(e,a,l){"use strict";l.d(a,{Z:function(){return m}});var t=l(9268),s=l(6006),r=l(9711),n=l(431),i=l(1389);l(3779),l(8431),l(9855);var d=(0,s.forwardRef)(function(e,a){var l=(0,r.u)(e);return s.createElement(i.S,(0,n.Z)({ref:a},l))}),u=l(5326),c=l.n(u),o=l(9700),m=e=>{let{label:a,start:l=2012,end:r=c()().format("YYYY"),control:n,required:i,name:u,errors:m,addClass:h,menuPosition:p="fixed",placeholder:f="Pilih Tahun",fromMax:x=!1}=e,j=()=>{let e=[];if(x)for(let a=r;a>=l;a--)e.push({value:a,label:a});else for(let a=l;a<=r;a++)e.push({value:a,label:a});return e},[w,b]=(0,s.useState)(null);return(0,s.useEffect)(()=>{"undefined"!=typeof document&&b(document.body)},[]),(0,t.jsxs)("div",{className:h,children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:a}),i&&(0,t.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),w&&(0,t.jsx)(o.Qr,{name:u,control:n,rules:{required:i},render:e=>{let{field:{onChange:a,value:l,name:s,ref:r}}=e;return(0,t.jsx)(d,{isClearable:!0,isSearchable:!0,options:j(),placeholder:f,menuPosition:p,menuPortalTarget:document.body,ref:r,value:l?j().find(e=>e.value===l):l,onChange:e=>a(e?e.value:e)})}}),(null==m?void 0:m.type)==="required"&&(0,t.jsx)("p",{className:"text-red-500 font-inter italic text-sm",children:"Tahun tidak boleh kosong"})]})}},6008:function(e,a,l){e.exports=l(4e3)}},function(e){e.O(0,[4550,4288,2772,3725,5350,9253,7698,1744],function(){return e(e.s=3052)}),_N_E=e.O()}]);