(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7800],{8183:function(e,t,a){Promise.resolve().then(a.bind(a,9814))},9814:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return S}});var r=a(9268),s=a(6006),n=a(1712),l=a(593),i=a(3346),d=a(2775),o=e=>{let{setDelete:t,setEdit:a,search:o,tahunWatch:c,semesterWatch:u}=e,h=n.Z.get("dosen_id")||"",{setAbsen:p,dtAbsen:m}=(0,d.Z)(),[f,g]=(0,s.useState)(1),[b,v]=(0,s.useState)(10),[w,x]=(0,s.useState)(!0),y=async()=>{await p({dosen_id:h,page:f,limit:b,tahun:c,semester:u,search:o}),x(!1)};return(0,s.useEffect)(()=>(c&&u&&y(),()=>{}),[f,b,c,u]),(0,s.useEffect)(()=>{g(1),y()},[o]),(0,r.jsx)("div",{className:"flex-1 flex-col max-w-full h-full overflow-auto",children:w?(0,r.jsx)(l.Z,{}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"",children:(0,r.jsx)(i.Z,{headTable:["No","Hari","Mata Kuliah","Kode MK","JML. SKS","ABSEN","Aksi"],tableBodies:["jadwal.hari","jadwal.matkul.nama","jadwal.matkul.kode","jadwal.matkul.sks","file"],dataTable:null==m?void 0:m.data,page:f,limit:b,setEdit:a,setDelete:t,hapus:!0,ubah:!0})})})})},c=a(366),u=a(2985),h=a(7808),p=a(9442),m=a(9700),f=a(63),g=a(1112),b=a(1468);a(6760);var v=e=>{let{register:t,errors:a,control:l,dtEdit:i,watch:d,setValue:o,showModal:c,myFile:u,setMyFile:h,tahunWatch:p,semesterWatch:m}=e,v=n.Z.get("dosen_id"),{setJadwalByDosen:w,dtJadwal:x}=(0,b.Z)(),y=async()=>{await w({tahun:p,semester:m,dosen_id:v})};return console.log(null==x?void 0:x.data),(0,s.useEffect)(()=>{p&&m&&y()},[c,p,m]),(0,r.jsxs)(r.Fragment,{children:[(null==x?void 0:x.data)&&(0,r.jsx)(g.Z,{label:"Jadwal",placeholder:"Pilih Jadwal",name:"jadwal_id",dataDb:null==x?void 0:x.data,body:["id","hari","matkul.nama","mulai","seles"],control:l,required:!0,errors:a.jadwal_id,addClass:"col-span-4"}),(0,r.jsx)(f.Z,{label:"Absen",name:"file",register:t,accept:"application/pdf",required:!0,errors:a.file,addClass:"col-span-4",setValue:o,fileEdit:null==i?void 0:i.file,myFile:u,setMyFile:h})]})},w=e=>{let{showModal:t,setShowModal:a,dtEdit:n,tahunWatch:l,semesterWatch:i}=e,[o,f]=(0,s.useState)(),{addData:g,updateData:b}=(0,d.Z)(),{register:w,handleSubmit:x,setValue:y,control:j,formState:{errors:S},watch:A}=(0,m.cI)(),k=()=>{y("id",""),y("jadwal_id",""),y("file",""),f(null)};(0,s.useEffect)(()=>{n?(y("id",n.id),y("jadwal_id",n.jadwal_id),y("file",n.file)):k()},[t,n]);let N=async e=>{if(console.log({row:e}),n){let{data:t}=await b(n.id,e);(0,p.Z)({event:t}),a(!1)}else{let{data:t}=await g(e);console.log({data:t}),(0,p.Z)({event:t}),(null==t?void 0:t.type)!=="success"||k()}};return(0,r.jsx)(h.Z,{title:"Form Dosen",showModal:t,setShowModal:a,children:(0,r.jsxs)("form",{onSubmit:x(N),children:[(0,r.jsx)(u.Z,{name:"id",register:w,type:"hidden"}),(0,r.jsx)("div",{className:"grid grid-cols-4 gap-2 mb-4",children:(0,r.jsx)(v,{register:w,errors:S,dtEdit:n,control:j,watch:A,setValue:y,showModal:t,myFile:o,setMyFile:f,tahunWatch:l,semesterWatch:i})}),(0,r.jsx)("div",{children:(0,r.jsx)(c.Z,{text:"Simpan",onClick:x(N)})})]})})},x=a(686),y=a(8919),j=a(8350),S=()=>{let{removeData:e}=(0,d.Z)(),[t,a]=(0,s.useState)(!1),[n,l]=(0,s.useState)(!1),[i,u]=(0,s.useState)(),[h,f]=(0,s.useState)(),[g,b]=(0,s.useState)(""),v=async t=>{let{id:a,isDelete:r}=t;if(u(a),r){let{data:t}=await e(i);(0,p.Z)({event:t}),l(!1)}else l(!0)},{register:S,control:A,formState:{errors:k},watch:N,setValue:C}=(0,m.cI)(),D=N("tahun"),Z=N("semester");return(0,s.useEffect)(()=>{let e=new Date().getFullYear();return C("tahun",e),C("semester","Genap"),()=>{}},[]),(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(y.x7,{}),(0,r.jsx)(w,{dtEdit:h,showModal:t,setShowModal:a,tahunWatch:D,semesterWatch:Z}),(0,r.jsx)(x.Z,{showDel:n,setShowDel:l,setDelete:v}),(0,r.jsxs)("div",{className:"mb-4 flex justify-between",children:[(0,r.jsx)("p",{children:"Silahkan mengolah data absen"}),(0,r.jsx)("div",{children:(0,r.jsx)(c.Z,{text:"Tambah absen",onClick:()=>{a(!0),f(null)}})})]}),(0,r.jsx)(j.Z,{placeholder:"Cari Absen",onChange:e=>b(e)})]}),(0,r.jsx)(o,{setDelete:v,setEdit:e=>{a(!0),f(e)},search:g,tahunWatch:D,semesterWatch:Z})]})}},63:function(e,t,a){"use strict";var r=a(9268),s=a(3415),n=a(6394),l=a.n(n),i=a(6006),d=a(5883),o=a.n(d);t.Z=e=>{let{label:t,register:a,required:n,name:d,errors:c,addClass:u,accept:h,setValue:p,fileEdit:m,myFile:f,setMyFile:g}=e,[b,v]=(0,i.useState)(),w=e=>new Promise(()=>{if(e){var t;let a=(null==e?void 0:null===(t=e.type)||void 0===t?void 0:t.split("/"))||[],r=a[0];if("image"!==r)return x(e);console.log({splitType:a}),o().imageFileResizer(e,1500,1500,a[1],80,0,e=>{x(e)},"file")}else x(null)}),x=e=>{var t;if(e){let t=new FileReader;t.readAsDataURL(e),t.onloadend=()=>{g(t.result)}}let a=(null==e?void 0:null===(t=e.type)||void 0===t?void 0:t.split("/"))||[];v(a[0]),p(d,e)};return(0,r.jsxs)("div",{className:u,children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:t}),n&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,r.jsx)("input",{className:"w-full text-base px-4 py-2 border  border-gray-300 rounded-lg focus:outline-none focus:border-secondary",id:"fileInput",type:"file",accept:h,onChange:e=>{var t;let a=(null===(t=e.target)||void 0===t?void 0:t.files[0])||null;w(a)}}),(0,r.jsx)("input",{type:"hidden",id:t,...a(d,{required:n})}),(0,r.jsxs)("div",{className:"flex gap-4 mt-2",children:[f&&"image"===b&&(0,r.jsx)(l(),{className:"rounded-lg",src:f,width:100,height:100,alt:""}),m&&"file"!==d&&(0,r.jsx)("div",{children:(0,r.jsx)(l(),{src:"".concat(s._n,"/").concat(m),width:100,height:100,alt:""})})]}),(null==c?void 0:c.type)==="required"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kosong"]})]})}},686:function(e,t,a){"use strict";var r=a(9268);a(6006);var s=a(8136);t.Z=e=>{let{showDel:t,setShowDel:a,setDelete:n}=e;return t&&(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"fixed inset-0 z-50 mx-auto flex justify-center bg-black/[0.2]",children:(0,r.jsxs)("div",{className:"bg-white p-5 rounded-xl lg:ml-64 md:min-w-[500px] h-min mt-[20%] max-h-[70%] overflow-auto",children:[(0,r.jsxs)("div",{className:"flex flex-row items-center justify-between border-b border-primary/[0.1] mb-4 pb-2",children:[(0,r.jsx)("h5",{className:"text-xl font-roboto",children:"Hapus Data"}),(0,r.jsx)(s.C7Q,{className:"cursor-pointer hover:text-black/[0.5]",onClick:()=>a(!1)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:"Apaka Anda Yakin Menghapus Data Ini?"}),(0,r.jsxs)("div",{className:"flex justify-center gap-4 mt-4",children:[(0,r.jsx)("button",{className:"hover:border hover:border-red-600 bg-red-600 w-20 py-2 rounded-xl text-white ",onClick:()=>n({isDelete:!0}),children:"Hapus"}),(0,r.jsx)("button",{className:"w-20 py-2 rounded-xl hover:border-b",onClick:()=>a(!1),children:"Batal"})]})]})]})})})}},3346:function(e,t,a){"use strict";var r=a(9268),s=a(4956),n=a(6008),l=a(8136);t.Z=e=>{(0,n.useRouter)();let t=t=>(e.page-1)*e.limit+t+1;return(0,r.jsxs)("table",{className:"w-full border-collapse text-left",children:[(0,r.jsx)("thead",{className:"",children:(0,r.jsx)("tr",{children:e.headTable&&e.headTable.map((e,t)=>(0,r.jsx)("th",{scope:"col",className:"px-6 py-4",children:e},t))})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-100 border-t border-gray-100 ",children:e.dataTable&&e.dataTable.map((a,n)=>{let{id:i}=a;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-6 py-4 rounded-l-xl",children:t(n)}),e.tableBodies.map((e,t)=>(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.Z)(a,e)},t)),(0,r.jsx)("td",{className:"px-6 py-4 rounded-r-xl",children:(0,r.jsxs)("div",{className:"flex flex-row gap-2",children:[e.costume&&e.costume(a),e.ubah&&(0,r.jsx)(l.Ph1,{onClick:()=>e.setEdit(a),size:20,className:"cursor-pointer hover:text-yellow-500",title:"Ubah"}),e.hapus&&(0,r.jsx)(l.AuQ,{onClick:()=>(null==e?void 0:e.setDelete)&&(null==e?void 0:e.setDelete({id:i,isDelete:!1})),size:20,className:"cursor-pointer hover:text-red-700",title:"Hapus"})]})})]},n)})})]})}},1468:function(e,t,a){"use strict";var r=a(2561),s=a(4475),n=a(3415);let l=(0,r.Ue)((0,s.mW)((e,t)=>({dtJadwal:[],setJadwal:async t=>{let{page:a=1,limit:r=10,search:s}=t;try{let t=await (0,n.hi)({method:"get",url:"/jadwal",params:{limit:r,page:a,search:s}});return e(e=>({...e,dtJadwal:t.data})),{status:"berhasil",data:t.data}}catch(e){return{status:"error",error:e.response.data}}},setJadwalAll:async t=>{let{search:a}=t;try{let t=await (0,n.hi)({method:"get",url:"/jadwal/all",params:{search:a}});return e(e=>({...e,dtJadwal:t.data})),{status:"berhasil",data:t.data}}catch(e){return{status:"error",error:e.response.data}}},setJadwalByThnSmt:async t=>{let{tahun:a,semester:r}=t;try{let t=await (0,n.hi)({method:"get",url:"/jadwal/thn-smt",params:{tahun:a,semester:r}});return e(e=>({...e,dtJadwal:t.data})),{status:"berhasil",data:t.data}}catch(e){return{status:"error",error:e.response.data}}},setJadwalByDosen:async t=>{let{tahun:a,semester:r,dosen_id:s}=t;try{let t=await (0,n.hi)({method:"get",url:"/jadwal/by-dosen",params:{tahun:a,semester:r,dosen_id:s}});return e(e=>({...e,dtJadwal:null==t?void 0:t.data})),{status:"berhasil",data:t.data}}catch(e){return{status:"error",error:e.response.data}}},setJadwalByRps:async t=>{let{tahun:a,semester:r,dosen_id:s}=t;try{let t=await (0,n.hi)({method:"get",url:"/jadwal/by-rps",params:{tahun:a,semester:r,dosen_id:s}});return e(e=>({...e,dtJadwal:null==t?void 0:t.data})),{status:"berhasil",data:t.data}}catch(e){return{status:"error",error:e.response.data}}}})));t.Z=l},2775:function(e,t,a){"use strict";var r=a(2561),s=a(4475),n=a(3415),l=a(4406);let i=(0,r.Ue)((0,s.mW)((e,t)=>({setFormData:e=>{let t=new FormData;return t.append("jadwal_id",e.jadwal_id),t.append("file",e.file),t},dtAbsen:[],showAbsen:[],setAbsen:async t=>{let{page:a=1,limit:r=10,search:s,dosen_id:i,tahun:d,semester:o}=t;try{let t=await l.Z.getState().setToken(),c=await (0,n.Sj)({method:"get",url:"/upload/absen",headers:{Authorization:"Bearer ".concat(t)},params:{limit:r,page:a,search:s,dosen_id:i,tahun:d,semester:o}});return e(e=>({...e,dtAbsen:c.data.data})),{status:"berhasil",data:c.data}}catch(e){var c;return{status:"error",error:null===(c=e.response)||void 0===c?void 0:c.data}}},setShowAbsen:async t=>{try{let a=await l.Z.getState().setToken(),r=await (0,n.Sj)({method:"get",url:"/upload/absen/".concat(t),headers:{Authorization:"Bearer ".concat(a)}});return console.log({response:r}),e(e=>({...e,showAbsen:r.data.data})),{status:"berhasil",data:r.data}}catch(e){var a;return{status:"error",error:null===(a=e.response)||void 0===a?void 0:a.data}}},addData:async a=>{let r=(null==a?void 0:a.file)?t().setFormData(a):a;try{let t=await l.Z.getState().setToken(),a=await (0,n.Sj)({method:"post",url:"/upload/absen",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"multipart/form-data"},data:r});return e(e=>({dtAbsen:{last_page:e.dtAbsen.last_page,current_page:e.dtAbsen.current_page,data:[a.data.data,...e.dtAbsen.data]}})),{status:"berhasil tambah",data:a.data}}catch(e){return{status:"error",data:e.response.data}}},removeData:async t=>{try{let a=await l.Z.getState().setToken(),r=await (0,n.Sj)({method:"delete",url:"/upload/absen/".concat(t),headers:{Authorization:"Bearer ".concat(a)}});return e(e=>({dtAbsen:{last_page:e.dtAbsen.last_page,current_page:e.dtAbsen.current_page,data:e.dtAbsen.data.filter(e=>e.id!==t)}})),{status:"berhasil hapus",data:r.data}}catch(e){return{status:"error",data:e.response.data}}},updateData:async(a,r)=>{delete r.id;let s=(null==r?void 0:r.file)?t().setFormData(r):r,i=await l.Z.getState().setToken();try{let t=await (0,n.Sj)({url:"/upload/absen/".concat(a),method:"post",headers:(null==r?void 0:r.file)?{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(i)}:{Authorization:"Bearer ".concat(i)},data:s,params:{_method:"PUT"}});return e(e=>({dtAbsen:{last_page:e.dtAbsen.last_page,current_page:e.dtAbsen.current_page,data:e.dtAbsen.data.map(e=>e.id===a?{...e,...t.data.data}:e)}})),{status:"berhasil update",data:t.data}}catch(e){return{status:"error",data:e.response.data}}}})));t.Z=i},6760:function(){},6008:function(e,t,a){e.exports=a(4e3)},5883:function(e){(()=>{"use strict";var t={d:(e,a)=>{for(var r in a)t.o(a,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:a[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},a={};t.r(a),t.d(a,{default:()=>s});var r=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t)}return e=[{key:"changeHeightWidth",value:function(e,t,a,r,s,n){return a>r&&(e=Math.round(e*r/a),a=r),e>t&&(a=Math.round(a*t/e),e=t),s&&a<s&&(e=Math.round(e*s/a),a=s),n&&e<n&&(a=Math.round(a*n/e),e=n),{height:e,width:a}}},{key:"resizeAndRotateImage",value:function(e,t,a,r,s){var n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"jpeg",l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:100,i=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,d=document.createElement("canvas"),o=e.width,c=e.height,u=this.changeHeightWidth(c,a,o,t,r,s);i&&(90===i||270===i)?(d.width=u.height,d.height=u.width):(d.width=u.width,d.height=u.height),o=u.width,c=u.height;var h=d.getContext("2d");return h.fillStyle="rgba(0, 0, 0, 0)",h.fillRect(0,0,o,c),h.imageSmoothingEnabled&&h.imageSmoothingQuality&&(h.imageSmoothingQuality="high"),i&&(h.rotate(i*Math.PI/180),90===i?h.translate(0,-d.width):180===i?h.translate(-d.width,-d.height):270===i?h.translate(-d.height,0):0!==i&&360!==i||h.translate(0,0)),h.drawImage(e,0,0,o,c),d.toDataURL("image/".concat(n),l/100)}},{key:"b64toByteArrays",value:function(e,t){t=t||"image/jpeg";for(var a=atob(e.toString().replace(/^data:image\/(png|jpeg|jpg|webp);base64,/,"")),r=[],s=0;s<a.length;s+=512){for(var n=a.slice(s,s+512),l=Array(n.length),i=0;i<n.length;i++)l[i]=n.charCodeAt(i);var d=new Uint8Array(l);r.push(d)}return r}},{key:"b64toBlob",value:function(e,t){var a=this.b64toByteArrays(e,t);return new Blob(a,{type:t,lastModified:new Date})}},{key:"b64toFile",value:function(e,t,a){var r=this.b64toByteArrays(e,a);return new File(r,t,{type:a,lastModified:new Date})}},{key:"createResizedImage",value:function(e,a,r,s,n,l,i){var d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"base64",o=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,u=new FileReader;if(!e)throw Error("File Not Found!");if(e.type&&!e.type.includes("image"))throw Error("File Is NOT Image!");u.readAsDataURL(e),u.onload=function(){var h=new Image;h.src=u.result,h.onload=function(){var u=t.resizeAndRotateImage(h,a,r,o,c,s,n,l),p="image/".concat(s);switch(d){case"blob":i(t.b64toBlob(u,p));break;case"base64":default:i(u);break;case"file":var m=e.name.toString().replace(/(png|jpeg|jpg|webp)$/i,"").concat(s.toString());i(t.b64toFile(u,m,p))}}},u.onerror=function(e){throw Error(e)}}}],function(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t,e),t}();let s={imageFileResizer:function(e,t,a,s,n,l,i,d,o,c){return r.createResizedImage(e,t,a,s,n,l,i,d,o,c)}};e.exports=a})()},1712:function(e,t,a){"use strict";/*! js-cookie v3.0.5 | MIT */function r(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)e[r]=a[r]}return e}a.d(t,{Z:function(){return s}});var s=function e(t,a){function s(e,s,n){if("undefined"!=typeof document){"number"==typeof(n=r({},a,n)).expires&&(n.expires=new Date(Date.now()+864e5*n.expires)),n.expires&&(n.expires=n.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var l="";for(var i in n)n[i]&&(l+="; "+i,!0!==n[i]&&(l+="="+n[i].split(";")[0]));return document.cookie=e+"="+t.write(s,e)+l}}return Object.create({set:s,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var a=document.cookie?document.cookie.split("; "):[],r={},s=0;s<a.length;s++){var n=a[s].split("="),l=n.slice(1).join("=");try{var i=decodeURIComponent(n[0]);if(r[i]=t.read(l,i),e===i)break}catch(e){}}return e?r[e]:r}},remove:function(e,t){s(e,"",r({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,r({},this.attributes,t))},withConverter:function(t){return e(r({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(a)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}},function(e){e.O(0,[6680,4550,4288,1092,9700,3725,3088,7590,9253,7698,1744],function(){return e(e.s=8183)}),_N_E=e.O()}]);