(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2249],{216:function(e,a,t){Promise.resolve().then(t.bind(t,2043))},2043:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return B}});var r=t(9268),i=t(6006),n=t(1712),l=t(593),s=t(3346),o=t(9114),d=e=>{let{setDelete:a,setEdit:t,search:d,tahunWatch:c,semesterWatch:u}=e,h=n.Z.get("dosen_id")||"",{setBeritaAcara:p,dtBeritaAcara:m}=(0,o.Z)(),[f,g]=(0,i.useState)(1),[b,v]=(0,i.useState)(10),[x,w]=(0,i.useState)(!0),j=async()=>{c&&u&&await p({dosen_id:h,page:f,limit:b,search:d,tahun:c,semester:u}),w(!1)};return(0,i.useEffect)(()=>(j(),()=>{}),[f,b,c,u]),(0,i.useEffect)(()=>{g(1),j()},[d]),(0,r.jsx)("div",{className:"flex-1 flex-col max-w-full h-full overflow-auto",children:x?(0,r.jsx)(l.Z,{}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"",children:(0,r.jsx)(s.Z,{headTable:["No","Hari","Mata Kuliah","Kode MK","JML. SKS","BERITA ACARA","Aksi"],tableBodies:["berita_acara.jadwal.hari","berita_acara.jadwal.matkul.nama","berita_acara.jadwal.matkul.kode","berita_acara.jadwal.matkul.sks","file"],dataTable:null==m?void 0:m.data,page:f,limit:b,setEdit:t,setDelete:a,hapus:!0,ubah:!0})})})})},c=t(366),u=t(2985),h=t(7808),p=t(9442),m=t(9700),f=t(63),g=t(1112),b=t(2561),v=t(4475),x=t(3415);let w=(0,b.Ue)((0,v.mW)((e,a)=>({dtBeritaAcara:[],setBeritaAcaraByDosen:async a=>{let{tahun:t,semester:r,dosen_id:i}=a;try{let a=await (0,x.hi)({method:"get",url:"/berita-acara/by-dosen",params:{tahun:t,semester:r,dosen_id:i}});return e(e=>({...e,dtBeritaAcara:null==a?void 0:a.data})),{status:"berhasil",data:a.data}}catch(e){return{status:"error",error:e.response.data}}}})));t(6760);var j=e=>{let{register:a,errors:t,control:l,dtEdit:s,watch:o,setValue:d,showModal:c,myFile:u,setMyFile:h,tahunWatch:p,semesterWatch:m}=e,b=n.Z.get("dosen_id"),{setBeritaAcaraByDosen:v,dtBeritaAcara:x}=w(),j=async()=>{await v({tahun:p,semester:m,dosen_id:b})};return(0,i.useEffect)(()=>{j()},[c]),(0,r.jsxs)(r.Fragment,{children:[(null==x?void 0:x.data)&&(0,r.jsx)(g.Z,{label:"Jadwal",placeholder:"Pilih Jadwal",name:"berita_acara_id",dataDb:null==x?void 0:x.data,body:["id","jadwal.hari","jadwal.matkul.nama","jadwal.mulai","jadwal.seles"],control:l,required:!0,errors:t.berita_acara_id,addClass:"col-span-4"}),(0,r.jsx)(f.Z,{label:"Berita Acara",name:"file",register:a,accept:"application/pdf",required:!0,errors:t.file,addClass:"col-span-4",setValue:d,fileEdit:null==s?void 0:s.file,myFile:u,setMyFile:h})]})},y=e=>{let{showModal:a,setShowModal:t,dtEdit:n,tahunWatch:l,semesterWatch:s}=e,[d,f]=(0,i.useState)(),{addData:g,updateData:b}=(0,o.Z)(),{register:v,handleSubmit:x,setValue:w,control:y,formState:{errors:A},watch:S}=(0,m.cI)(),k=()=>{w("id",""),w("berita_acara_id",""),w("file",""),f(null)};(0,i.useEffect)(()=>{n?(w("id",n.id),w("berita_acara_id",n.berita_acara_id),w("file",n.file)):k()},[a,n]);let B=async e=>{if(console.log({row:e}),n){let{data:a}=await b(n.id,e);(0,p.Z)({event:a}),t(!1)}else{let{data:a}=await g(e);console.log({data:a}),(0,p.Z)({event:a}),(null==a?void 0:a.type)!=="success"||k()}};return(0,r.jsx)(h.Z,{title:"Form Dosen",showModal:a,setShowModal:t,children:(0,r.jsxs)("form",{onSubmit:x(B),children:[(0,r.jsx)(u.Z,{name:"id",register:v,type:"hidden"}),(0,r.jsx)("div",{className:"grid grid-cols-4 gap-2 mb-4",children:(0,r.jsx)(j,{register:v,errors:A,dtEdit:n,control:y,watch:S,setValue:w,showModal:a,myFile:d,setMyFile:f,tahunWatch:l,semesterWatch:s})}),(0,r.jsx)("div",{children:(0,r.jsx)(c.Z,{text:"Simpan",onClick:x(B)})})]})})},A=t(686),S=t(8919),k=t(8350),B=()=>{let{removeData:e}=(0,o.Z)(),[a,t]=(0,i.useState)(!1),[n,l]=(0,i.useState)(!1),[s,u]=(0,i.useState)(),[h,f]=(0,i.useState)(),[g,b]=(0,i.useState)(""),[v,x]=(0,i.useState)(""),[w,j]=(0,i.useState)(""),B=async a=>{let{id:t,isDelete:r}=a;if(u(t),r){let{data:a}=await e(s);(0,p.Z)({event:a}),l(!1)}else l(!0)},{register:_,control:N,formState:{errors:C},watch:D,setValue:Z}=(0,m.cI)();return(0,i.useEffect)(()=>{let e=new Date().getFullYear();return x(e),j("Genap"),()=>{}},[]),(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(S.x7,{}),(0,r.jsx)(y,{dtEdit:h,showModal:a,setShowModal:t,tahunWatch:v,semesterWatch:w}),(0,r.jsx)(A.Z,{showDel:n,setShowDel:l,setDelete:B}),(0,r.jsxs)("div",{className:"mb-4 flex justify-between",children:[(0,r.jsx)("p",{children:"Silahkan mengolah data berita acara"}),(0,r.jsx)("div",{children:(0,r.jsx)(c.Z,{text:"Tambah berita acara",onClick:()=>{t(!0),f(null)}})})]}),(0,r.jsx)(k.Z,{placeholder:"Cari BeritaAcara",onChange:e=>b(e)})]}),(0,r.jsx)(d,{setDelete:B,setEdit:e=>{t(!0),f(e)},search:g,tahunWatch:v,semesterWatch:w})]})}},63:function(e,a,t){"use strict";var r=t(9268),i=t(3415),n=t(6394),l=t.n(n),s=t(6006),o=t(5883),d=t.n(o);a.Z=e=>{let{label:a,register:t,required:n,name:o,errors:c,addClass:u,accept:h,setValue:p,fileEdit:m,myFile:f,setMyFile:g}=e,[b,v]=(0,s.useState)(),x=e=>new Promise(()=>{if(e){var a;let t=(null==e?void 0:null===(a=e.type)||void 0===a?void 0:a.split("/"))||[],r=t[0];if("image"!==r)return w(e);console.log({splitType:t}),d().imageFileResizer(e,1500,1500,t[1],80,0,e=>{w(e)},"file")}else w(null)}),w=e=>{var a;if(e){let a=new FileReader;a.readAsDataURL(e),a.onloadend=()=>{g(a.result)}}let t=(null==e?void 0:null===(a=e.type)||void 0===a?void 0:a.split("/"))||[];v(t[0]),p(o,e)};return(0,r.jsxs)("div",{className:u,children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:a}),n&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,r.jsx)("input",{className:"w-full text-base px-4 py-2 border  border-gray-300 rounded-lg focus:outline-none focus:border-secondary",id:"fileInput",type:"file",accept:h,onChange:e=>{var a;let t=(null===(a=e.target)||void 0===a?void 0:a.files[0])||null;x(t)}}),(0,r.jsx)("input",{type:"hidden",id:a,...t(o,{required:n})}),(0,r.jsxs)("div",{className:"flex gap-4 mt-2",children:[f&&"image"===b&&(0,r.jsx)(l(),{className:"rounded-lg",src:f,width:100,height:100,alt:""}),m&&"file"!==o&&(0,r.jsx)("div",{children:(0,r.jsx)(l(),{src:"".concat(i._n,"/").concat(m),width:100,height:100,alt:""})})]}),(null==c?void 0:c.type)==="required"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[a," tidak boleh kosong"]})]})}},686:function(e,a,t){"use strict";var r=t(9268);t(6006);var i=t(8136);a.Z=e=>{let{showDel:a,setShowDel:t,setDelete:n}=e;return a&&(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"fixed inset-0 z-50 mx-auto flex justify-center bg-black/[0.2]",children:(0,r.jsxs)("div",{className:"bg-white p-5 rounded-xl lg:ml-64 md:min-w-[500px] h-min mt-[20%] max-h-[70%] overflow-auto",children:[(0,r.jsxs)("div",{className:"flex flex-row items-center justify-between border-b border-primary/[0.1] mb-4 pb-2",children:[(0,r.jsx)("h5",{className:"text-xl font-roboto",children:"Hapus Data"}),(0,r.jsx)(i.C7Q,{className:"cursor-pointer hover:text-black/[0.5]",onClick:()=>t(!1)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:"Apaka Anda Yakin Menghapus Data Ini?"}),(0,r.jsxs)("div",{className:"flex justify-center gap-4 mt-4",children:[(0,r.jsx)("button",{className:"hover:border hover:border-red-600 bg-red-600 w-20 py-2 rounded-xl text-white ",onClick:()=>n({isDelete:!0}),children:"Hapus"}),(0,r.jsx)("button",{className:"w-20 py-2 rounded-xl hover:border-b",onClick:()=>t(!1),children:"Batal"})]})]})]})})})}},3346:function(e,a,t){"use strict";var r=t(9268),i=t(4956),n=t(6008),l=t(8136);a.Z=e=>{(0,n.useRouter)();let a=a=>(e.page-1)*e.limit+a+1;return(0,r.jsxs)("table",{className:"w-full border-collapse text-left",children:[(0,r.jsx)("thead",{className:"",children:(0,r.jsx)("tr",{children:e.headTable&&e.headTable.map((e,a)=>(0,r.jsx)("th",{scope:"col",className:"px-6 py-4",children:e},a))})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-100 border-t border-gray-100 ",children:e.dataTable&&e.dataTable.map((t,n)=>{let{id:s}=t;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-6 py-4 rounded-l-xl",children:a(n)}),e.tableBodies.map((e,a)=>(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,i.Z)(t,e)},a)),(0,r.jsx)("td",{className:"px-6 py-4 rounded-r-xl",children:(0,r.jsxs)("div",{className:"flex flex-row gap-2",children:[e.costume&&e.costume(t),e.ubah&&(0,r.jsx)(l.Ph1,{onClick:()=>e.setEdit(t),size:20,className:"cursor-pointer hover:text-yellow-500",title:"Ubah"}),e.hapus&&(0,r.jsx)(l.AuQ,{onClick:()=>(null==e?void 0:e.setDelete)&&(null==e?void 0:e.setDelete({id:s,isDelete:!1})),size:20,className:"cursor-pointer hover:text-red-700",title:"Hapus"})]})})]},n)})})]})}},9114:function(e,a,t){"use strict";var r=t(2561),i=t(4475),n=t(3415),l=t(4406);let s=(0,r.Ue)((0,i.mW)((e,a)=>({setFormData:e=>{let a=new FormData;return a.append("berita_acara_id",e.berita_acara_id),a.append("file",e.file),a},dtBeritaAcara:[],showBeritaAcara:[],setBeritaAcara:async a=>{let{page:t=1,limit:r=10,search:i,dosen_id:s,tahun:o,semester:d}=a;try{let a=await l.Z.getState().setToken(),c=await (0,n.Sj)({method:"get",url:"/upload/berita-acara",headers:{Authorization:"Bearer ".concat(a)},params:{limit:r,page:t,search:i,dosen_id:s,tahun:o,semester:d}});return e(e=>({...e,dtBeritaAcara:c.data.data})),{status:"berhasil",data:c.data}}catch(e){var c;return{status:"error",error:null===(c=e.response)||void 0===c?void 0:c.data}}},setShowBeritaAcara:async a=>{try{let t=await l.Z.getState().setToken(),r=await (0,n.Sj)({method:"get",url:"/upload/berita-acara/".concat(a),headers:{Authorization:"Bearer ".concat(t)}});return console.log({response:r}),e(e=>({...e,showBeritaAcara:r.data.data})),{status:"berhasil",data:r.data}}catch(e){var t;return{status:"error",error:null===(t=e.response)||void 0===t?void 0:t.data}}},addData:async t=>{let r=(null==t?void 0:t.file)?a().setFormData(t):t;try{let a=await l.Z.getState().setToken(),t=await (0,n.Sj)({method:"post",url:"/upload/berita-acara",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"multipart/form-data"},data:r});return e(e=>({dtBeritaAcara:{last_page:e.dtBeritaAcara.last_page,current_page:e.dtBeritaAcara.current_page,data:[t.data.data,...e.dtBeritaAcara.data]}})),{status:"berhasil tambah",data:t.data}}catch(e){return{status:"error",data:e.response.data}}},removeData:async a=>{try{let t=await l.Z.getState().setToken(),r=await (0,n.Sj)({method:"delete",url:"/upload/berita-acara/".concat(a),headers:{Authorization:"Bearer ".concat(t)}});return e(e=>({dtBeritaAcara:{last_page:e.dtBeritaAcara.last_page,current_page:e.dtBeritaAcara.current_page,data:e.dtBeritaAcara.data.filter(e=>e.id!==a)}})),{status:"berhasil hapus",data:r.data}}catch(e){return{status:"error",data:e.response.data}}},updateData:async(t,r)=>{delete r.id;let i=(null==r?void 0:r.file)?a().setFormData(r):r,s=await l.Z.getState().setToken();try{let a=await (0,n.Sj)({url:"/upload/berita-acara/".concat(t),method:"post",headers:(null==r?void 0:r.file)?{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(s)}:{Authorization:"Bearer ".concat(s)},data:i,params:{_method:"PUT"}});return e(e=>({dtBeritaAcara:{last_page:e.dtBeritaAcara.last_page,current_page:e.dtBeritaAcara.current_page,data:e.dtBeritaAcara.data.map(e=>e.id===t?{...e,...a.data.data}:e)}})),{status:"berhasil update",data:a.data}}catch(e){return{status:"error",data:e.response.data}}}})));a.Z=s},6760:function(){},6008:function(e,a,t){e.exports=t(4e3)},5883:function(e){(()=>{"use strict";var a={d:(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o:(e,a)=>Object.prototype.hasOwnProperty.call(e,a),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};a.r(t),a.d(t,{default:()=>i});var r=function(){var e;function a(){!function(e,a){if(!(e instanceof a))throw TypeError("Cannot call a class as a function")}(this,a)}return e=[{key:"changeHeightWidth",value:function(e,a,t,r,i,n){return t>r&&(e=Math.round(e*r/t),t=r),e>a&&(t=Math.round(t*a/e),e=a),i&&t<i&&(e=Math.round(e*i/t),t=i),n&&e<n&&(t=Math.round(t*n/e),e=n),{height:e,width:t}}},{key:"resizeAndRotateImage",value:function(e,a,t,r,i){var n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"jpeg",l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:100,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,o=document.createElement("canvas"),d=e.width,c=e.height,u=this.changeHeightWidth(c,t,d,a,r,i);s&&(90===s||270===s)?(o.width=u.height,o.height=u.width):(o.width=u.width,o.height=u.height),d=u.width,c=u.height;var h=o.getContext("2d");return h.fillStyle="rgba(0, 0, 0, 0)",h.fillRect(0,0,d,c),h.imageSmoothingEnabled&&h.imageSmoothingQuality&&(h.imageSmoothingQuality="high"),s&&(h.rotate(s*Math.PI/180),90===s?h.translate(0,-o.width):180===s?h.translate(-o.width,-o.height):270===s?h.translate(-o.height,0):0!==s&&360!==s||h.translate(0,0)),h.drawImage(e,0,0,d,c),o.toDataURL("image/".concat(n),l/100)}},{key:"b64toByteArrays",value:function(e,a){a=a||"image/jpeg";for(var t=atob(e.toString().replace(/^data:image\/(png|jpeg|jpg|webp);base64,/,"")),r=[],i=0;i<t.length;i+=512){for(var n=t.slice(i,i+512),l=Array(n.length),s=0;s<n.length;s++)l[s]=n.charCodeAt(s);var o=new Uint8Array(l);r.push(o)}return r}},{key:"b64toBlob",value:function(e,a){var t=this.b64toByteArrays(e,a);return new Blob(t,{type:a,lastModified:new Date})}},{key:"b64toFile",value:function(e,a,t){var r=this.b64toByteArrays(e,t);return new File(r,a,{type:t,lastModified:new Date})}},{key:"createResizedImage",value:function(e,t,r,i,n,l,s){var o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"base64",d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,u=new FileReader;if(!e)throw Error("File Not Found!");if(e.type&&!e.type.includes("image"))throw Error("File Is NOT Image!");u.readAsDataURL(e),u.onload=function(){var h=new Image;h.src=u.result,h.onload=function(){var u=a.resizeAndRotateImage(h,t,r,d,c,i,n,l),p="image/".concat(i);switch(o){case"blob":s(a.b64toBlob(u,p));break;case"base64":default:s(u);break;case"file":var m=e.name.toString().replace(/(png|jpeg|jpg|webp)$/i,"").concat(i.toString());s(a.b64toFile(u,m,p))}}},u.onerror=function(e){throw Error(e)}}}],function(e,a){for(var t=0;t<a.length;t++){var r=a[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(a,e),a}();let i={imageFileResizer:function(e,a,t,i,n,l,s,o,d,c){return r.createResizedImage(e,a,t,i,n,l,s,o,d,c)}};e.exports=t})()},1712:function(e,a,t){"use strict";/*! js-cookie v3.0.5 | MIT */function r(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)e[r]=t[r]}return e}t.d(a,{Z:function(){return i}});var i=function e(a,t){function i(e,i,n){if("undefined"!=typeof document){"number"==typeof(n=r({},t,n)).expires&&(n.expires=new Date(Date.now()+864e5*n.expires)),n.expires&&(n.expires=n.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var l="";for(var s in n)n[s]&&(l+="; "+s,!0!==n[s]&&(l+="="+n[s].split(";")[0]));return document.cookie=e+"="+a.write(i,e)+l}}return Object.create({set:i,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],r={},i=0;i<t.length;i++){var n=t[i].split("="),l=n.slice(1).join("=");try{var s=decodeURIComponent(n[0]);if(r[s]=a.read(l,s),e===s)break}catch(e){}}return e?r[e]:r}},remove:function(e,a){i(e,"",r({},a,{expires:-1}))},withAttributes:function(a){return e(this.converter,r({},this.attributes,a))},withConverter:function(a){return e(r({},this.converter,a),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(a)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}},function(e){e.O(0,[6680,4550,4288,1092,9700,3725,3088,7590,9253,7698,1744],function(){return e(e.s=216)}),_N_E=e.O()}]);