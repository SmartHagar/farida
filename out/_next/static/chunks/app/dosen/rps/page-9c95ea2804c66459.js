(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[652],{5249:function(e,t,a){Promise.resolve().then(a.bind(a,2193))},2193:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return k}});var r=a(9268),l=a(6006),s=a(1712),i=a(593),n=a(4803),o=a(4956),d=a(8136),u=e=>{let t=t=>(e.page-1)*e.limit+t+1;return(0,r.jsxs)("table",{className:"w-full border-collapse text-left",children:[(0,r.jsx)("thead",{className:"",children:(0,r.jsx)("tr",{children:e.headTable&&e.headTable.map((e,t)=>(0,r.jsx)("th",{scope:"col",className:"px-6 py-4",children:e},t))})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-100 border-t border-gray-100 ",children:e.dataTable&&e.dataTable.map((a,l)=>{let{id:s}=a,i=null==a?void 0:a.status;return(0,r.jsxs)("tr",{className:" ".concat(i&&"ditolak"===i?"bg-error":"diproses"===i?"bg-warning":"hover:bg-gray-50 hover:text-secondary"),children:[(0,r.jsx)("td",{className:"px-6 py-4 rounded-l-xl",children:t(l)}),e.tableBodies.map((e,t)=>(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap capitalize",children:(0,o.Z)(a,e)},t)),(0,r.jsx)("td",{className:"px-6 py-4 rounded-r-xl",children:(0,r.jsx)("div",{className:"flex flex-row gap-2",children:i&&"ditolak"===i&&(0,r.jsx)(d.Ph1,{onClick:()=>e.setEdit(a),size:20,className:"cursor-pointer hover:text-yellow-500",title:"Ubah"})})})]},l)})})]})},c=e=>{let{setDelete:t,setEdit:a,search:o}=e,d=s.Z.get("dosen_id")||"",{setShowRps:c,showRps:h}=(0,n.Z)(),[p,m]=(0,l.useState)(1),[f,g]=(0,l.useState)(10),[v,w]=(0,l.useState)(!0),y=async()=>{await c(d),w(!1)};return(0,l.useEffect)(()=>(y(),()=>{}),[p,f]),(0,l.useEffect)(()=>{m(1),y()},[o]),(0,r.jsx)("div",{className:"flex-1 flex-col max-w-full h-full overflow-auto",children:v?(0,r.jsx)(i.Z,{}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"",children:(0,r.jsx)(u,{headTable:["No","Hari","Mata Kuliah","Kode MK","JML. SKS","RPS","Status","Aksi"],tableBodies:["jadwal.hari","jadwal.matkul.nama","jadwal.matkul.kode","jadwal.matkul.sks","file","status"],dataTable:h,page:p,limit:f,setEdit:a,setDelete:t})})})})},h=a(366),p=a(2985),m=a(7808),f=a(9442),g=a(9700),v=a(63),w=a(1112),y=a(1468);a(6760);var b=e=>{let{register:t,errors:a,control:i,dtEdit:n,watch:o,setValue:d,showModal:u,tgl_lahir:c,setTgl_lahir:h,myFile:p,setMyFile:m,tahunWatch:f,semesterWatch:g}=e,b=s.Z.get("dosen_id"),{setJadwalByDosen:j,dtJadwal:x}=(0,y.Z)(),S=async()=>{await j({tahun:f,semester:g,dosen_id:b})};return console.log(null==x?void 0:x.data),(0,l.useEffect)(()=>{S()},[u]),(0,r.jsxs)(r.Fragment,{children:[(null==x?void 0:x.data)&&(0,r.jsx)(w.Z,{label:"Jadwal",placeholder:"Pilih Jadwal",name:"jadwal_id",dataDb:null==x?void 0:x.data,body:["id","hari","matkul.nama","mulai","seles"],control:i,required:!0,errors:a.jadwal_id,addClass:"col-span-4"}),(0,r.jsx)(v.Z,{label:"RPS",name:"file",register:t,accept:"application/pdf",required:!0,errors:a.file,addClass:"col-span-4",setValue:d,fileEdit:null==n?void 0:n.file,myFile:p,setMyFile:m})]})},j=e=>{let{showModal:t,setShowModal:a,dtEdit:s,tahunWatch:i,semesterWatch:o}=e,[d,u]=(0,l.useState)(new Date("01-01-1980")),[c,v]=(0,l.useState)(),{addData:w,updateData:y}=(0,n.Z)(),{register:j,handleSubmit:x,setValue:S,control:k,formState:{errors:R},watch:N}=(0,g.cI)(),_=()=>{S("id",""),S("jadwal_id",""),S("file",""),v(null)};(0,l.useEffect)(()=>{s?(S("id",s.id),S("jadwal_id",s.jadwal_id),S("file",s.file)):_()},[t,s]);let C=async e=>{if(e.status="diproses",console.log({row:e}),s){let{data:t}=await y(s.id,e);(0,f.Z)({event:t}),a(!1)}else{let{data:t}=await w(e);console.log({data:t}),(0,f.Z)({event:t}),(null==t?void 0:t.type)!=="success"||_()}};return(0,r.jsx)(m.Z,{title:"Form Dosen",showModal:t,setShowModal:a,children:(0,r.jsxs)("form",{onSubmit:x(C),children:[(0,r.jsx)(p.Z,{name:"id",register:j,type:"hidden"}),(0,r.jsx)("div",{className:"grid grid-cols-4 gap-2 mb-4",children:(0,r.jsx)(b,{register:j,errors:R,dtEdit:s,control:k,watch:N,setValue:S,showModal:t,myFile:c,setMyFile:v,tgl_lahir:d,setTgl_lahir:u,tahunWatch:i,semesterWatch:o})}),(0,r.jsx)("div",{children:(0,r.jsx)(h.Z,{text:"Simpan",onClick:x(C)})})]})})},x=a(8919),S=a(8350),k=()=>{let[e,t]=(0,l.useState)(!1),[a,s]=(0,l.useState)(!1),[i,n]=(0,l.useState)(),[o,d]=(0,l.useState)(),[u,p]=(0,l.useState)(""),{register:m,control:f,formState:{errors:v},watch:w,setValue:y}=(0,g.cI)(),b=w("tahun"),k=w("semester");return(0,l.useEffect)(()=>{let e=new Date().getFullYear();return y("tahun",e),y("semester","Ganjil"),()=>{}},[]),(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(x.x7,{}),(0,r.jsx)(j,{dtEdit:o,showModal:e,setShowModal:t,tahunWatch:b,semesterWatch:k}),(0,r.jsxs)("div",{className:"mb-4 flex justify-between",children:[(0,r.jsx)("p",{children:"Silahkan Mengolah data RPS"}),(0,r.jsx)("div",{children:(0,r.jsx)(h.Z,{text:"Tambah RPS",onClick:()=>{t(!0),d(null)}})})]}),(0,r.jsx)(S.Z,{placeholder:"Cari RPS",onChange:e=>p(e)})]}),(0,r.jsx)(c,{setEdit:e=>{t(!0),d(e)},search:u})]})}},63:function(e,t,a){"use strict";var r=a(9268),l=a(3415),s=a(6394),i=a.n(s),n=a(6006),o=a(5883),d=a.n(o);t.Z=e=>{let{label:t,register:a,required:s,name:o,errors:u,addClass:c,accept:h,setValue:p,fileEdit:m,myFile:f,setMyFile:g}=e,[v,w]=(0,n.useState)(),y=e=>new Promise(()=>{if(e){var t;let a=(null==e?void 0:null===(t=e.type)||void 0===t?void 0:t.split("/"))||[],r=a[0];if("image"!==r)return b(e);console.log({splitType:a}),d().imageFileResizer(e,1500,1500,a[1],80,0,e=>{b(e)},"file")}else b(null)}),b=e=>{var t;if(e){let t=new FileReader;t.readAsDataURL(e),t.onloadend=()=>{g(t.result)}}let a=(null==e?void 0:null===(t=e.type)||void 0===t?void 0:t.split("/"))||[];w(a[0]),p(o,e)};return(0,r.jsxs)("div",{className:c,children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:t}),s&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,r.jsx)("input",{className:"w-full text-base px-4 py-2 border  border-gray-300 rounded-lg focus:outline-none focus:border-secondary",id:"fileInput",type:"file",accept:h,onChange:e=>{var t;let a=(null===(t=e.target)||void 0===t?void 0:t.files[0])||null;y(a)}}),(0,r.jsx)("input",{type:"hidden",id:t,...a(o,{required:s})}),(0,r.jsxs)("div",{className:"flex gap-4 mt-2",children:[f&&"image"===v&&(0,r.jsx)(i(),{className:"rounded-lg",src:f,width:100,height:100,alt:""}),m&&"file"!==o&&(0,r.jsx)("div",{children:(0,r.jsx)(i(),{src:"".concat(l._n,"/").concat(m),width:100,height:100,alt:""})})]}),(null==u?void 0:u.type)==="required"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kosong"]})]})}},1468:function(e,t,a){"use strict";var r=a(2561),l=a(4475),s=a(3415);let i=(0,r.Ue)((0,l.mW)((e,t)=>({dtJadwal:[],setJadwal:async t=>{let{page:a=1,limit:r=10,search:l}=t;try{let t=await (0,s.hi)({method:"get",url:"/jadwal",params:{limit:r,page:a,search:l}});return e(e=>({...e,dtJadwal:t.data})),{status:"berhasil",data:t.data}}catch(e){return{status:"error",error:e.response.data}}},setJadwalAll:async t=>{let{search:a}=t;try{let t=await (0,s.hi)({method:"get",url:"/jadwal/all",params:{search:a}});return e(e=>({...e,dtJadwal:t.data})),{status:"berhasil",data:t.data}}catch(e){return{status:"error",error:e.response.data}}},setJadwalByThnSmt:async t=>{let{tahun:a,semester:r}=t;try{let t=await (0,s.hi)({method:"get",url:"/jadwal/thn-smt",params:{tahun:a,semester:r}});return e(e=>({...e,dtJadwal:t.data})),{status:"berhasil",data:t.data}}catch(e){return{status:"error",error:e.response.data}}},setJadwalByDosen:async t=>{let{tahun:a,semester:r,dosen_id:l}=t;try{let t=await (0,s.hi)({method:"get",url:"/jadwal/by-dosen",params:{tahun:a,semester:r,dosen_id:l}});return e(e=>({...e,dtJadwal:null==t?void 0:t.data})),{status:"berhasil",data:t.data}}catch(e){return{status:"error",error:e.response.data}}},setJadwalByRps:async t=>{let{tahun:a,semester:r,dosen_id:l}=t;try{let t=await (0,s.hi)({method:"get",url:"/jadwal/by-rps",params:{tahun:a,semester:r,dosen_id:l}});return e(e=>({...e,dtJadwal:null==t?void 0:t.data})),{status:"berhasil",data:t.data}}catch(e){return{status:"error",error:e.response.data}}}})));t.Z=i},4803:function(e,t,a){"use strict";var r=a(2561),l=a(4475),s=a(3415),i=a(4406);let n=(0,r.Ue)((0,l.mW)((e,t)=>({setFormData:e=>{let t=new FormData;return t.append("jadwal_id",e.jadwal_id),t.append("file",e.file),t},dtRps:[],showRps:[],setRps:async t=>{let{page:a=1,limit:r=10,search:l,tahun:n,semester:o}=t;try{let t=await i.Z.getState().setToken(),d=await (0,s.Sj)({method:"get",url:"/upload/rps",headers:{Authorization:"Bearer ".concat(t)},params:{limit:r,page:a,search:l,tahun:n,semester:o}});return e(e=>({...e,dtRps:d.data.data})),{status:"berhasil",data:d.data}}catch(e){var d;return{status:"error",error:null===(d=e.response)||void 0===d?void 0:d.data}}},setShowRps:async t=>{try{let a=await i.Z.getState().setToken(),r=await (0,s.Sj)({method:"get",url:"/upload/rps/".concat(t),headers:{Authorization:"Bearer ".concat(a)}});return console.log({response:r}),e(e=>({...e,showRps:r.data.data})),{status:"berhasil",data:r.data}}catch(e){var a;return{status:"error",error:null===(a=e.response)||void 0===a?void 0:a.data}}},addData:async e=>{var a,r,l,n;let o=(null==e?void 0:e.foto)?t().setFormData(e):e;try{let e=await i.Z.getState().setToken(),n=await (0,s.Sj)({method:"post",url:"/upload/rps",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"multipart/form-data"},data:o}),d=null==n?void 0:null===(l=n.data)||void 0===l?void 0:null===(r=l.data)||void 0===r?void 0:null===(a=r.jadwal)||void 0===a?void 0:a.dosen_id;return await t().setShowRps(d),{status:"berhasil tambah",data:n.data}}catch(e){return{status:"error",data:null===(n=e.response)||void 0===n?void 0:n.data}}},removeData:async t=>{try{let a=await i.Z.getState().setToken(),r=await (0,s.Sj)({method:"delete",url:"/upload/rps/".concat(t),headers:{Authorization:"Bearer ".concat(a)}});return e(e=>({dtRps:{last_page:e.dtRps.last_page,current_page:e.dtRps.current_page,data:e.dtRps.data.filter(e=>e.id!==t)}})),{status:"berhasil hapus",data:r.data}}catch(e){return{status:"error",data:e.response.data}}},updateData:async(e,a)=>{var r,l,n,o,d;delete a.id;let u=(null==a?void 0:a.foto)?t().setFormData(a):a,c=await i.Z.getState().setToken();try{let i=await (0,s.Sj)({url:"/upload/rps/".concat(e),method:"post",headers:(null==a?void 0:a.foto)?{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(c)}:{Authorization:"Bearer ".concat(c)},data:u,params:{_method:"PUT"}}),h=null==i?void 0:null===(n=i.data)||void 0===n?void 0:null===(l=n.data)||void 0===l?void 0:null===(r=l.jadwal)||void 0===r?void 0:r.dosen_id,p=null==i?void 0:null===(d=i.data)||void 0===d?void 0:null===(o=d.data)||void 0===o?void 0:o.jadwal;return await t().setShowRps(h),await t().setRps({tahun:null==p?void 0:p.tahun,semester:null==p?void 0:p.semester}),{status:"berhasil update",data:i.data}}catch(e){return{status:"error",data:e.response.data}}}})));t.Z=n},6760:function(){},5883:function(e){(()=>{"use strict";var t={d:(e,a)=>{for(var r in a)t.o(a,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:a[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},a={};t.r(a),t.d(a,{default:()=>l});var r=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t)}return e=[{key:"changeHeightWidth",value:function(e,t,a,r,l,s){return a>r&&(e=Math.round(e*r/a),a=r),e>t&&(a=Math.round(a*t/e),e=t),l&&a<l&&(e=Math.round(e*l/a),a=l),s&&e<s&&(a=Math.round(a*s/e),e=s),{height:e,width:a}}},{key:"resizeAndRotateImage",value:function(e,t,a,r,l){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"jpeg",i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:100,n=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,o=document.createElement("canvas"),d=e.width,u=e.height,c=this.changeHeightWidth(u,a,d,t,r,l);n&&(90===n||270===n)?(o.width=c.height,o.height=c.width):(o.width=c.width,o.height=c.height),d=c.width,u=c.height;var h=o.getContext("2d");return h.fillStyle="rgba(0, 0, 0, 0)",h.fillRect(0,0,d,u),h.imageSmoothingEnabled&&h.imageSmoothingQuality&&(h.imageSmoothingQuality="high"),n&&(h.rotate(n*Math.PI/180),90===n?h.translate(0,-o.width):180===n?h.translate(-o.width,-o.height):270===n?h.translate(-o.height,0):0!==n&&360!==n||h.translate(0,0)),h.drawImage(e,0,0,d,u),o.toDataURL("image/".concat(s),i/100)}},{key:"b64toByteArrays",value:function(e,t){t=t||"image/jpeg";for(var a=atob(e.toString().replace(/^data:image\/(png|jpeg|jpg|webp);base64,/,"")),r=[],l=0;l<a.length;l+=512){for(var s=a.slice(l,l+512),i=Array(s.length),n=0;n<s.length;n++)i[n]=s.charCodeAt(n);var o=new Uint8Array(i);r.push(o)}return r}},{key:"b64toBlob",value:function(e,t){var a=this.b64toByteArrays(e,t);return new Blob(a,{type:t,lastModified:new Date})}},{key:"b64toFile",value:function(e,t,a){var r=this.b64toByteArrays(e,a);return new File(r,t,{type:a,lastModified:new Date})}},{key:"createResizedImage",value:function(e,a,r,l,s,i,n){var o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"base64",d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,c=new FileReader;if(!e)throw Error("File Not Found!");if(e.type&&!e.type.includes("image"))throw Error("File Is NOT Image!");c.readAsDataURL(e),c.onload=function(){var h=new Image;h.src=c.result,h.onload=function(){var c=t.resizeAndRotateImage(h,a,r,d,u,l,s,i),p="image/".concat(l);switch(o){case"blob":n(t.b64toBlob(c,p));break;case"base64":default:n(c);break;case"file":var m=e.name.toString().replace(/(png|jpeg|jpg|webp)$/i,"").concat(l.toString());n(t.b64toFile(c,m,p))}}},c.onerror=function(e){throw Error(e)}}}],function(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t,e),t}();let l={imageFileResizer:function(e,t,a,l,s,i,n,o,d,u){return r.createResizedImage(e,t,a,l,s,i,n,o,d,u)}};e.exports=a})()},1712:function(e,t,a){"use strict";/*! js-cookie v3.0.5 | MIT */function r(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)e[r]=a[r]}return e}a.d(t,{Z:function(){return l}});var l=function e(t,a){function l(e,l,s){if("undefined"!=typeof document){"number"==typeof(s=r({},a,s)).expires&&(s.expires=new Date(Date.now()+864e5*s.expires)),s.expires&&(s.expires=s.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var n in s)s[n]&&(i+="; "+n,!0!==s[n]&&(i+="="+s[n].split(";")[0]));return document.cookie=e+"="+t.write(l,e)+i}}return Object.create({set:l,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var a=document.cookie?document.cookie.split("; "):[],r={},l=0;l<a.length;l++){var s=a[l].split("="),i=s.slice(1).join("=");try{var n=decodeURIComponent(s[0]);if(r[n]=t.read(i,n),e===n)break}catch(e){}}return e?r[e]:r}},remove:function(e,t){l(e,"",r({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,r({},this.attributes,t))},withConverter:function(t){return e(r({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(a)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}},function(e){e.O(0,[6680,4550,4288,1092,9700,3725,3088,7590,9253,7698,1744],function(){return e(e.s=5249)}),_N_E=e.O()}]);