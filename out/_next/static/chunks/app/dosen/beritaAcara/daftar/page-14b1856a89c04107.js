(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9414],{4215:function(e,a,t){!function(e){e.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(e,a){return(12===e&&(e=0),"pagi"===a)?e:"siang"===a?e>=11?e:e+12:"sore"===a||"malam"===a?e+12:void 0},meridiem:function(e,a,t){return e<11?"pagi":e<15?"siang":e<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",ss:"%d detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:0,doy:6}})}(t(5326))},890:function(e,a,t){Promise.resolve().then(t.bind(t,3343))},3343:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return y}});var r=t(9268),s=t(6006),l=t(1712),n=t(593),i=t(3346),d=t(8136),u=t(5846),o=t.n(u),c=t(1468),m=t(8668),h=t(6008),f=e=>{let{setDelete:a,setEdit:t}=e,u=l.Z.get("dosen_id")||"",{setBeritaAcaraByJadwal:f,dtBeritaAcara:p}=(0,m.Z)(),{setJadwalByDosenFull:b,dtJadwal:x}=(0,c.Z)(),[g,v]=(0,s.useState)(1),[j,w]=(0,s.useState)(10),[y,_]=(0,s.useState)(!0),[S,k]=(0,s.useState)(),N=(0,h.useSearchParams)(),L=(0,h.useSearchParams)().get("cari")||"",M=N.get("semester")||"",Z=N.get("year")||"",J=(0,s.useCallback)(async()=>{_(!0),await b({dosen_id:u,search:L,tahun:Z,semester:M}),_(!1)},[u,L,M,b,Z]);(0,s.useEffect)(()=>{M&&Z&&J()},[J,M,Z]);let Y=async()=>{var e;let a=[];null==x||null===(e=x.data)||void 0===e||e.map(e=>{a.push(e.id)});let t=a.join(",");a.length>0&&await f({jadwal_id:t})};(0,s.useEffect)(()=>{(null==x?void 0:x.data)&&Y()},[JSON.stringify(null==x?void 0:x.data)]);let T=(e,a)=>{console.log({dtJadwal:e,dtBeritaAcara:a});let t=null==a?void 0:a.map(a=>{let t=null==e?void 0:e.find(e=>e.id===parseInt(a.jadwal_id));return t?{...a,jadwal:t}:null}).filter(e=>null!==e);k({data:t}),_(!1)};return(0,s.useEffect)(()=>{(null==x?void 0:x.data)&&(null==p?void 0:p.data)&&T(null==x?void 0:x.data,null==p?void 0:p.data)},[JSON.stringify(null==x?void 0:x.data),JSON.stringify(null==p?void 0:p.data)]),(0,r.jsx)("div",{className:"flex-1 flex-col max-w-full h-full overflow-auto",children:y?(0,r.jsx)(n.Z,{}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"",children:(0,r.jsx)(i.Z,{headTable:["No","Hari","Mata Kuliah","Kode MK","JML. SKS","Aksi"],tableBodies:["jadwal.hari","jadwal.matkul.nama","jadwal.matkul.kode","jadwal.matkul.sks"],dataTable:null==S?void 0:S.data,page:g,limit:j,setEdit:t,setDelete:a,hapus:!1,ubah:!1,costume:e=>(0,r.jsx)(o(),{href:"/dosen/beritaAcara/detail?berita_acara_id=".concat(null==e?void 0:e.id,"&jadwal_id=").concat(null==e?void 0:e.jadwal_id),title:"Lihat Detail",target:"_blank",children:(0,r.jsx)(d.LSF,{})})})})})})},p=t(8919),b=t(5170),x=t(1852),g=t(9247),v=t(4407),j=t(9700),w=e=>{let{halaman:a}=e,{register:t,formState:{errors:s},setValue:l,watch:n,control:i}=(0,j.cI)(),d=n("semester"),u=n("year");return(0,r.jsxs)("div",{className:"grid grid-cols-8 gap-2 w-full",children:[(0,r.jsx)(x.Z,{setValue:l,yearWatch:u,time:1e3}),(0,r.jsx)(b.Z,{setValue:l,semesterWatch:d,time:500}),(0,r.jsx)(g.Z,{placeholder:"Pilih Semester",control:i,name:"semester",options:[{value:"Ganjil",label:"Ganjil"},{value:"Genap",label:"Genap"}],errors:s.semester,addClass:"col-span-8 md:col-span-2 text-black",menuPosition:"absolute"}),(0,r.jsx)(v.Z,{name:"year",placeholder:"Pilih Tahun",start:new Date().getFullYear()-2,end:new Date().getFullYear(),fromMax:!0,control:i,addClass:"col-span-8 md:col-span-2 text-black",menuPosition:"absolute"})]})},y=()=>{let[e,a]=(0,s.useState)(!1),[t,l]=(0,s.useState)(),[n,i]=(0,s.useState)(""),[d,u]=(0,s.useState)(""),[o,c]=(0,s.useState)("");return(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(p.Toaster,{}),(0,r.jsx)("div",{className:"mb-4 flex justify-between",children:(0,r.jsx)("p",{children:"Silahkan Mengolah data berita acara"})}),(0,r.jsx)("div",{children:(0,r.jsx)(w,{halaman:"Berita Acara"})})]}),(0,r.jsx)(f,{setEdit:e=>{a(!0),l(e)}})]})}},5170:function(e,a,t){"use strict";t.d(a,{Z:function(){return d}});var r=t(9268),s=t(5326),l=t.n(s);t(4215);var n=t(6008),i=t(6006),d=e=>{let{semesterWatch:a,setValue:t,time:s}=e,d=(0,n.useRouter)(),u=()=>{let e=window.location.href,a=new URL(e),t=new URLSearchParams(a.search),r=t.get("semester");return{url:a,params:t,semesterParams:r}},o=(0,i.useCallback)(e=>{let{url:a,params:t}=u();t.delete("semester"),t.append("semester",e),a.search=t.toString(),d.push(a.toString())},[d]);return(0,i.useEffect)(()=>(setTimeout(()=>{let{semesterParams:e}=u();if(e)t("semester",e);else{let e=l()().month()+1;console.log({month:e}),t("semester",e>6?"Ganjil":"Genap")}},s),()=>{}),[o,t,s]),(0,i.useEffect)(()=>(a&&o(a.toString()),()=>{}),[a]),(0,r.jsx)(r.Fragment,{})}},1852:function(e,a,t){"use strict";var r=t(9268),s=t(6008),l=t(6006);a.Z=e=>{let{yearWatch:a,setValue:t,time:n}=e,i=(0,s.useRouter)(),d=()=>{let e=window.location.href,a=new URL(e),t=new URLSearchParams(a.search),r=t.get("year");return{url:a,params:t,yearParams:r}},u=e=>{let{url:a,params:t}=d();t.delete("year"),t.append("year",e.toString()),a.search=t.toString(),i.push(a.toString())};return(0,l.useEffect)(()=>(setTimeout(()=>{let{yearParams:e}=d();if(e)t("year",parseInt(e));else{let e=new Date().getFullYear();t("year",e)}},n),()=>{}),[]),(0,l.useEffect)(()=>(a?u(a.toString()):u(""),()=>{}),[a]),(0,r.jsx)(r.Fragment,{})}},593:function(e,a,t){"use strict";var r=t(9268);t(6006),a.Z=()=>(0,r.jsx)("div",{className:"w-12 h-12 rounded-full animate-spin border-y border-solid border-secondary border-t-transparent shadow-md"})},9247:function(e,a,t){"use strict";var r=t(9268),s=t(6006),l=t(480),n=t(9700);a.Z=e=>{let{label:a,control:t,required:i,name:d,errors:u,addClass:o,menuPosition:c="fixed",placeholder:m="Pilih Tahun",options:h=[]}=e,[f,p]=(0,s.useState)(null);return(0,s.useEffect)(()=>{"undefined"!=typeof document&&p(document.body)},[]),(0,r.jsxs)("div",{className:o,children:[a&&(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:a}),i&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),f&&(0,r.jsx)(n.Qr,{name:d,control:t,rules:{required:i},render:e=>{let{field:{onChange:a,value:t,name:s,ref:n}}=e;return(0,r.jsx)(l.ZP,{isClearable:!0,isSearchable:!0,options:h,placeholder:m,menuPosition:c,ref:n,value:t?h.find(e=>e.value===t):t,onChange:e=>a(e?e.value:e)})}}),(null==u?void 0:u.type)==="required"&&(0,r.jsx)("p",{className:"text-red-500 font-inter italic text-sm",children:"Tahun tidak boleh kosong"})]})}},4407:function(e,a,t){"use strict";var r=t(9268),s=t(6006),l=t(480),n=t(5326),i=t.n(n),d=t(9700);a.Z=e=>{let{label:a,start:t=2012,end:n=i()().format("YYYY"),control:u,required:o,name:c,errors:m,addClass:h,menuPosition:f="fixed",placeholder:p="Pilih Tahun",fromMax:b=!1}=e,x=()=>{let e=[];if(b)for(let a=n;a>=t;a--)e.push({value:a,label:a});else for(let a=t;a<=n;a++)e.push({value:a,label:a});return e},[g,v]=(0,s.useState)(null);return(0,s.useEffect)(()=>{"undefined"!=typeof document&&v(document.body)},[]),(0,r.jsxs)("div",{className:h,children:[a&&(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:a}),o&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),g&&(0,r.jsx)(d.Qr,{name:c,control:u,rules:{required:o},render:e=>{let{field:{onChange:a,value:t,name:s,ref:n}}=e;return(0,r.jsx)(l.ZP,{isClearable:!0,isSearchable:!0,options:x(),placeholder:p,menuPosition:f,ref:n,value:t?x().find(e=>e.value===t):t,onChange:e=>a(e?e.value:e)})}}),(null==m?void 0:m.type)==="required"&&(0,r.jsx)("p",{className:"text-red-500 font-inter italic text-sm",children:"Tahun tidak boleh kosong"})]})}},3346:function(e,a,t){"use strict";var r=t(9268),s=t(4956),l=t(6008),n=t(8136);a.Z=e=>{(0,l.useRouter)();let a=a=>(e.page-1)*e.limit+a+1;return(0,r.jsxs)("table",{className:"w-full border-collapse text-left",children:[(0,r.jsx)("thead",{className:"",children:(0,r.jsx)("tr",{children:e.headTable&&e.headTable.map((e,a)=>(0,r.jsx)("th",{scope:"col",className:"px-6 py-4",children:e},a))})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-100 border-t border-gray-100 ",children:e.dataTable&&e.dataTable.map((t,l)=>{let{id:i}=t;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-6 py-4 rounded-l-xl",children:a(l)}),e.tableBodies.map((e,a)=>(0,r.jsx)("td",{className:"px-6 py-4",children:(0,s.Z)(t,e)},a)),(0,r.jsx)("td",{className:"px-6 py-4 rounded-r-xl",children:(0,r.jsxs)("div",{className:"flex flex-row gap-2",children:[e.costume&&e.costume(t),e.ubah&&(0,r.jsx)(n.Ph1,{onClick:()=>e.setEdit&&e.setEdit(t),size:20,className:"cursor-pointer hover:text-yellow-500",title:"Ubah"}),e.hapus&&(0,r.jsx)(n.AuQ,{onClick:()=>(null==e?void 0:e.setDelete)&&(null==e?void 0:e.setDelete({id:i,isDelete:!1})),size:20,className:"cursor-pointer hover:text-red-700",title:"Hapus"})]})})]},l)})})]})}},3415:function(e,a,t){"use strict";t.d(a,{I8:function(){return l},Sj:function(){return n},VF:function(){return d},_n:function(){return s},hi:function(){return i}});var r=t(4214);let s="https://back.silaku.fstuogp.com",l=r.Z.create({baseURL:"".concat(s,"/auth")}),n=r.Z.create({baseURL:"".concat(s,"/crud")}),i=r.Z.create({baseURL:"".concat(s,"/api")});r.Z.create({baseURL:"".concat(s,"/storage")});let d=r.Z.create({baseURL:"".concat("https://back.edom.fstuogp.com","/api")})},4956:function(e,a,t){"use strict";var r=t(9268);t(6006);var s=t(3415),l=t(6394),n=t.n(l),i=t(5326),d=t.n(i);a.Z=(e,a)=>{var t,l;let i=null===(l=e)||void 0===l?void 0:null===(t=l.thn_angkatan)||void 0===t?void 0:t.substring(2),u=a.split(".");if(Array.isArray(u)){let t=u.length>1?u.pop():u;if(t.includes("mulai_seles")){let a=d()(e.mulai,"HH:mm:ss").format("HH:mm"),t=d()(e.seles,"HH:mm:ss").format("HH:mm");return"".concat(a,"-").concat(t)}if(t.includes("progdi_smt")){let a=e.prodi.singkat,t=e.matkul.semester;return"".concat(a,"-").concat(t)}if(t.includes("NPM_FULL"))return"".concat(e.prodi.kode).concat(i).concat(e.NPM);let l=u.length,o=1,c=u[0];for(;(e=e[c])&&o<l;)c=u[o],o++;return"object"==typeof e?e?e[t]:"":"tgl_mulai"===a||"tgl_selesai"===a||"tgl"===a?d()(e).format("DD/MM/YYYY"):"gambar"===a||"foto"===a?e&&(0,r.jsx)(n(),{src:"".concat(s._n,"/").concat(e),width:100,height:100,alt:""}):"file"===a?e&&(0,r.jsx)("a",{href:"".concat(s._n,"/").concat(e),target:"_blank",children:"Lihat File"}):(0,r.jsx)("p",{className:"capitalize",children:e})}throw"parts is not valid array"}},8668:function(e,a,t){"use strict";var r=t(2561),s=t(4475),l=t(3415);let n=(0,r.Ue)((0,s.mW)((e,a)=>({dtBeritaAcara:[],setBeritaAcaraByJadwal:async a=>{let{jadwal_id:t}=a;try{let a=await (0,l.hi)({method:"get",url:"/berita-acara/byJadwal",params:{jadwal_id:t}});return e(e=>({...e,dtBeritaAcara:null==a?void 0:a.data})),{status:"berhasil",data:a.data}}catch(e){return{status:"error",error:e.response.data}}}})));a.Z=n},1468:function(e,a,t){"use strict";var r=t(2561),s=t(4475),l=t(3415);let n=(0,r.Ue)((0,s.mW)((e,a)=>({dtJadwal:[],setJadwal:async a=>{let{page:t=1,limit:r=10,search:s,tahun:n,semester:i,prodi_id:d}=a;try{let a=await (0,l.VF)({method:"get",url:"/jadwal",params:{limit:r,page:t,search:s,tahun:n,semester:i,prodi_id:d}});return e(e=>({...e,dtJadwal:a.data.data})),{status:"berhasil",data:a.data}}catch(e){return{status:"error",error:e.response.data}}},setJadwalAll:async a=>{let{search:t}=a;try{let a=await (0,l.VF)({method:"get",url:"/jadwal/all",params:{search:t}});return e(e=>({...e,dtJadwal:a.data})),{status:"berhasil",data:a.data}}catch(e){return{status:"error",error:e.response.data}}},setJadwalByDosenFull:async a=>{let{tahun:t,semester:r,dosen_id:s}=a;try{let a=await (0,l.VF)({method:"get",url:"/jadwal/byDosenFull",params:{tahun:t,semester:r,dosen_id:s}});return e(e=>({...e,dtJadwal:null==a?void 0:a.data})),{status:"berhasil",data:a.data}}catch(e){return{status:"error",error:e.response.data}}},setByTahunSemester:async a=>{let{search:t,tahun:r,semester:s,prodi_id:n}=a;try{let a=await (0,l.VF)({method:"get",url:"/jadwal/byTahunSemester",params:{search:t,tahun:r,semester:s,prodi_id:n}});return e(e=>({...e,dtJadwal:a.data.data})),{status:"berhasil",data:a.data}}catch(e){return{status:"error",error:e.response.data}}},setJadwalByRps:async a=>{let{tahun:t,semester:r,dosen_id:s}=a;try{let a=await (0,l.VF)({method:"get",url:"/jadwal/by-rps",params:{dosen_id:s}});return e(e=>({...e,dtJadwal:null==a?void 0:a.data})),{status:"berhasil",data:a.data}}catch(e){return{status:"error",error:e.response.data}}},setShowJadwal:async a=>{try{let t=await (0,l.VF)({method:"get",url:"/jadwal/".concat(a)});return e(e=>({...e,dtJadwal:t.data.data})),{status:"berhasil",data:t.data}}catch(e){return{status:"error",error:e.response.data}}}})));a.Z=n},480:function(e,a,t){"use strict";t.d(a,{ZP:function(){return i}});var r=t(9711),s=t(431),l=t(6006),n=t(1389);t(3779),t(8431),t(9855);var i=(0,l.forwardRef)(function(e,a){var t=(0,r.u)(e);return l.createElement(n.S,(0,s.Z)({ref:a},t))})}},function(e){e.O(0,[6680,4550,4288,2772,1092,7608,5846,9253,7698,1744],function(){return e(e.s=890)}),_N_E=e.O()}]);