(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3230],{4489:function(e,a,t){Promise.resolve().then(t.bind(t,9326))},9326:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return R}});var s=t(9268),l=t(6006),r=t(593),i=t(5437),n=t(3346),d=t(769),o=t(6008),c=e=>{let{setDelete:a,setEdit:t,search:c}=e,u=(0,o.useSearchParams)(),x=u.get("berita_acara_id")||"",{setDetBeritaAcara:m,dtDetBeritaAcara:h}=(0,d.Z)(),[p,f]=(0,l.useState)(1),[j,v]=(0,l.useState)(10),[g,b]=(0,l.useState)(!0),w=async()=>{await m({page:p,limit:j,search:c,berita_acara_id:x}),b(!1)};return(0,l.useEffect)(()=>(w(),()=>{}),[p,j]),(0,l.useEffect)(()=>{f(1),w()},[c]),(0,s.jsx)("div",{className:"flex-1 flex-col max-w-full h-full overflow-auto",children:g?(0,s.jsx)(r.Z,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"",children:(0,s.jsx)(n.Z,{headTable:["No","Tgl. Pertemuan","Materi","Jumlah MHS","Sistem Belajar","Foto","Aksi"],tableBodies:["tgl","materi","jmlh_mhs","sistem","foto"],dataTable:h.data,page:p,limit:j,setEdit:t,setDelete:a,ubah:!0,hapus:!0})}),(null==h?void 0:h.last_page)>1&&(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(i.Z,{currentPage:null==h?void 0:h.current_page,totalPages:null==h?void 0:h.last_page,setPage:f})})]})})},u=t(366),x=t(2985),m=t(7808),h=t(9442),p=t(9700),f=t(9977),j=t.n(f),v=t(5326),g=t.n(v),b=e=>{let{control:a,required:t,name:l,errors:r,addClass:i,label:n,startDate:d,setStartDate:o,includeDateIntervals:c}=e;return(0,s.jsxs)("div",{className:i,children:[(0,s.jsxs)("label",{className:"text-sm font-medium text-gray-700 tracking-wide block",children:[n,t&&(0,s.jsx)("span",{className:"ml-1 text-red-600",children:"*"})]}),(0,s.jsx)(p.Qr,{name:l,control:a,rules:{required:t},render:e=>{let{field:a}=e;return(0,s.jsx)(j(),{selected:d,onChange:e=>{if(e){o(e);let t=g()(e).format("YYYY-MM-DD");a.onChange(t)}else o(null),a.onChange("")},dateFormat:"dd/MM/yyyy",value:d||"",peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",className:"w-full border rounded-lg py-2 px-4",includeDateIntervals:c,placeholderText:"dd/mm/yyyy"})}}),(null==r?void 0:r.type)==="required"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[n," tidak boleh kosong"]})]})},w=t(63),y=t(1281);t(6760);var N=e=>{var a;let{register:t,errors:l,control:r,dtEdit:i,watch:n,setValue:d,showModal:o,tgl:c,setTgl:u,myFile:m,setMyFile:h}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b,{label:"Tgl. Berita Acara",name:"tgl",control:r,startDate:c,setStartDate:u,required:!0,errors:l.tgl,addClass:"col-span-4 lg:col-span-2",includeDateIntervals:[{start:(a=new Date,new Date(a.getTime()-1728e7)),end:new Date}]}),(0,s.jsx)(x.Z,{label:"Jumlah MHS",name:"jmlh_mhs",register:t,required:!0,errors:l.jmlh_mhs,type:"number",addClass:"col-span-4 lg:col-span-2"}),(0,s.jsx)(x.Z,{label:"Materi (Kuliah Perpertemuan)",name:"materi",register:t,required:!0,errors:l.materi,addClass:"col-span-4"}),(0,s.jsx)(y.u,{label:"Sistem Belajar",defaultOption:"Pilih Sistem Belajar",register:t,errors:l,name:"sistem",options:[{value:"Daring",label:"Daring (Online)"},{value:"Luring",label:"Luring (Tatap Muka)"}],addClass:"col-span-4"}),(0,s.jsx)(w.Z,{label:"Foto (Aktivitas BBM di Kelas)",name:"foto",register:t,accept:"image/*",required:!0,errors:l.foto,addClass:"col-span-4",setValue:d,fileEdit:null==i?void 0:i.foto,myFile:m,setMyFile:h})]})},k=e=>{let{showModal:a,setShowModal:t,dtEdit:i}=e,n=(0,o.useSearchParams)(),c=n.get("berita_acara_id")||"",[f,j]=(0,l.useState)(new Date("01-01-1980")),[v,g]=(0,l.useState)(),[b,w]=(0,l.useState)(!1),{addData:y,updateData:k}=(0,d.Z)(),{register:S,handleSubmit:C,setValue:_,control:D,formState:{errors:Z},watch:M}=(0,p.cI)(),P=()=>{_("id",""),_("materi",""),_("jmlh_mhs",""),_("tgl",""),_("foto",""),j(""),g(null)};(0,l.useEffect)(()=>{i?(_("id",i.id),_("materi",i.materi),_("jmlh_mhs",i.jmlh_mhs),_("tgl",i.tgl),j(new Date(i.tgl)),_("foto",i.foto),_("sistem",i.sistem)):P()},[a,i]);let B=async e=>{if(w(!0),e.berita_acara_id=c,console.log({row:e}),i){let{data:a}=await k(i.id,e);(0,h.Z)({event:a}),t(!1)}else{let{data:a}=await y(e);console.log({data:a}),(0,h.Z)({event:a}),(null==a?void 0:a.type)!=="success"||P()}w(!1)};return(0,s.jsx)(m.Z,{title:"Form Dosen",showModal:a,setShowModal:t,children:(0,s.jsxs)("form",{onSubmit:C(B),children:[(0,s.jsx)(x.Z,{name:"id",register:S,type:"hidden"}),(0,s.jsx)("div",{className:"grid grid-cols-4 gap-2 mb-4",children:(0,s.jsx)(N,{register:S,errors:Z,dtEdit:i,control:D,watch:M,setValue:_,showModal:a,myFile:v,setMyFile:g,tgl:f,setTgl:j})}),(0,s.jsx)("div",{children:b?(0,s.jsx)(r.Z,{}):(0,s.jsx)(u.Z,{text:"Simpan",onClick:C(B)})})]})})},S=t(686),C=t(8919),_=t(8350),D=t(3415),Z=t(1468);async function M(e){let{row:a,dtEdit:t,setIsLoading:s,setShowModal:l,addData:r,updateData:i,resetForm:n,toastShow:d}=e;if(s(!0),t){a.dosen=!0;let{data:e}=await i(t.id,a);d({event:e}),l(!1)}else{let{data:e}=await r(a);console.log({data:e}),d({event:e}),(null==e?void 0:e.type)!=="success"||n&&n()}s(!1)}var P=t(3371),B=t.n(P),A=e=>{let{text:a,onClick:t,addClass:l}=e;return(0,s.jsx)("button",{onClick:t,className:"bg-secondary rounded-lg px-4 py-2 text-white w-fit cursor-pointer hover:shadow-sm hover:shadow-secondary ".concat(l),children:a})},T=e=>{let{control:a,required:t,name:r,errors:i,addClass:n,label:d,clear:o=!1,setValue:c}=e,u=(0,l.useRef)(null),x=e=>e?e.getTrimmedCanvas().toDataURL("image/png"):null;return(0,s.jsxs)("div",{className:n,children:[(0,s.jsxs)("label",{className:"text-sm font-medium text-gray-700 tracking-wide block",children:[d,t&&(0,s.jsx)("span",{className:"ml-1 text-red-600 ",children:"*"})]}),(0,s.jsx)(p.Qr,{name:r,control:a,rules:{required:t},render:e=>{let{field:a}=e;return(0,s.jsx)(B(),{penColor:"black",canvasProps:{className:"sigCanvas border border-primary w-full rounded-xl"},ref:e=>{u.current=e},onEnd:()=>a.onChange(x(u.current))})}}),o&&(0,s.jsx)(A,{text:"Hapus ".concat(d),onClick:()=>{u.current&&(c(r,""),u.current.clear())},addClass:"mt-2"}),(null==i?void 0:i.type)==="required"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[d," tidak boleh kosong"]})]})},E=t(2561),F=t(4475),q=t(4406);let K=(0,E.Ue)((0,F.mW)((e,a)=>({dtParafBeritaAcara:[],showParafBeritaAcara:[],setParafBeritaAcara:async a=>{let{page:t=1,limit:s=10,berita_acara_id:l}=a;try{let a=await q.Z.getState().setToken(),r=await (0,D.Sj)({method:"get",url:"/parafBeritaAcara",headers:{Authorization:"Bearer ".concat(a)},params:{limit:s,page:t,berita_acara_id:l}});return e(e=>({...e,dtParafBeritaAcara:r.data.data})),{status:"berhasil",data:r.data}}catch(e){var r;return{status:"error",error:null===(r=e.response)||void 0===r?void 0:r.data}}},addData:async e=>{try{let t=await q.Z.getState().setToken(),s=await (0,D.Sj)({method:"post",url:"/parafBeritaAcara",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"multipart/form-data"},data:e});return a().setParafBeritaAcara({berita_acara_id:e.berita_acara_id}),{status:"berhasil tambah",data:s.data}}catch(e){return{status:"error",data:e.response.data}}}})));var L=t(6394),I=t.n(L),O=e=>{let{addData:a,dtParafBeritaAcara:t,setParafBeritaAcara:r}=K(),[i,n]=(0,l.useState)(!1),[d,c]=(0,l.useState)(!1),[x,f]=(0,l.useState)(""),[j,v]=(0,l.useState)(""),g=(0,o.useSearchParams)(),b=g.get("berita_acara_id")||"",w=(0,l.useCallback)(async()=>{await r({berita_acara_id:b})},[b,r]);(0,l.useEffect)(()=>{w()},[w]);let{register:y,handleSubmit:N,setValue:k,control:S,formState:{errors:C},watch:_,reset:Z}=(0,p.cI)(),P=async e=>{e.berita_acara_id=b,e.jabatan=j,console.log({row:e}),M({addData:a,row:e,setShowModal:n,setIsLoading:c,toastShow:h.Z}),n(!1)};return(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(u.Z,{text:"Paraf Dosen",addClass:"self-end",onClick:()=>{n(!0),f("Dosen"),v("dosen")}}),(0,s.jsx)(u.Z,{text:"Paraf Mhs",addClass:"self-end",onClick:()=>{n(!0),f("Mahasiswa"),v("mahasiswa")}})]}),(0,s.jsx)("div",{className:"flex gap-2",children:t&&t.map(e=>(0,s.jsx)(I(),{alt:"paraf",src:"".concat(D._n,"/").concat(e.paraf),width:100,height:100},e.id))}),(0,s.jsxs)(m.Z,{title:"Paraf",showModal:i,setShowModal:n,width:"300px",children:[(0,s.jsx)("div",{children:(0,s.jsx)(T,{control:S,name:"paraf",label:"Paraf ".concat(x),required:!0,errors:C.paraf,setValue:k,clear:!0})}),(0,s.jsx)("div",{className:"flex gap-4 mt-4",children:(0,s.jsx)(u.Z,{text:"Simpan",onClick:N(P)})})]})]})},R=()=>{var e,a,t,i,n;let{removeData:x,showDetBeritaAcara:m}=(0,d.Z)(),{setShowJadwal:p,dtJadwal:f}=(0,Z.Z)(),j=(0,o.useSearchParams)(),v=j.get("berita_acara_id")||"",g=j.get("jadwal_id")||"",[b,w]=(0,l.useState)(!1),[y,N]=(0,l.useState)(!1),[M,P]=(0,l.useState)(),[B,A]=(0,l.useState)(),[T,E]=(0,l.useState)(""),[F,q]=(0,l.useState)(!1),K=async e=>{let{id:a,isDelete:t}=e;if(P(a),t){let{data:e}=await x(M);(0,h.Z)({event:e}),N(!1)}else N(!0)};return(0,l.useEffect)(()=>(p(g),()=>{}),[g,p]),(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(C.Toaster,{}),(0,s.jsx)(k,{dtEdit:B,showModal:b,setShowModal:w}),(0,s.jsx)(S.Z,{showDel:y,setShowDel:N,setDelete:K}),(0,s.jsxs)("div",{className:"mb-4 flex flex-col-reverse justify-between md:flex-row",children:[(0,s.jsxs)("div",{className:"flex flex-col w-full",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"w-32 inline-block uppercase",children:"Dosen"}),(0,s.jsxs)("span",{children:[": ",null==f?void 0:null===(e=f.dosen)||void 0===e?void 0:e.nama]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"w-32 inline-block uppercase",children:"KODE MK"}),(0,s.jsxs)("span",{children:[": ",null==f?void 0:null===(a=f.matkul)||void 0===a?void 0:a.kode]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"w-32 inline-block uppercase",children:"Mata Kuliah"}),(0,s.jsxs)("span",{children:[": ",null==f?void 0:null===(t=f.matkul)||void 0===t?void 0:t.nama]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"w-32 inline-block uppercase",children:"SKS/SMT/KLS"}),(0,s.jsxs)("span",{children:[": ",null==f?void 0:null===(i=f.matkul)||void 0===i?void 0:i.sks," / ",null==f?void 0:f.semester," T.A 2023/2024"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"w-32 inline-block uppercase",children:"Ruangan"}),(0,s.jsxs)("span",{children:[": ",null==f?void 0:null===(n=f.ruangan)||void 0===n?void 0:n.kode]})]})]}),(0,s.jsxs)("div",{className:"flex lg:justify-normal flex-col gap-4",children:[(0,s.jsxs)("div",{className:"flex gap-2 self-start md:w-64",children:[F?(0,s.jsx)(r.Z,{}):(0,s.jsx)(u.Z,{text:"Cetak",addClass:" bg-secondary",onClick:()=>{q(!0),window.open("".concat(D._n,"/pdf/berita-acara/").concat(v)),q(!1)}}),(0,s.jsx)(u.Z,{text:"Tambah Data",addClass:"",onClick:()=>{w(!0),A(null)}})]}),(0,s.jsx)("div",{className:"flex gap-2 self-start md:w-64",children:(0,s.jsx)(O,{})})]})]}),(0,s.jsx)(_.Z,{placeholder:"Cari Data",onChange:e=>E(e)})]}),(0,s.jsx)(c,{setDelete:K,setEdit:e=>{w(!0),A(e)},search:T})]})}},63:function(e,a,t){"use strict";var s=t(9268),l=t(3415),r=t(6394),i=t.n(r),n=t(6006),d=t(5883),o=t.n(d);a.Z=e=>{let{label:a,register:t,required:r,name:d,errors:c,addClass:u,accept:x,setValue:m,fileEdit:h,myFile:p,setMyFile:f}=e,[j,v]=(0,n.useState)(),g=e=>new Promise(()=>{if(e){var a;let t=(null==e?void 0:null===(a=e.type)||void 0===a?void 0:a.split("/"))||[],s=t[0];if("image"!==s)return b(e);console.log({splitType:t}),o().imageFileResizer(e,1500,1500,t[1],80,0,e=>{b(e)},"file")}else b(null)}),b=e=>{var a;if(e){let a=new FileReader;a.readAsDataURL(e),a.onloadend=()=>{f(a.result)}}let t=(null==e?void 0:null===(a=e.type)||void 0===a?void 0:a.split("/"))||[];v(t[0]),m(d,e)};return(0,s.jsxs)("div",{className:u,children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:a}),r&&(0,s.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,s.jsx)("input",{className:"w-full text-base px-4 py-2 border  border-gray-300 rounded-lg focus:outline-none focus:border-secondary",id:"fileInput",type:"file",accept:x,onChange:e=>{var a;let t=(null===(a=e.target)||void 0===a?void 0:a.files[0])||null;g(t)}}),(0,s.jsx)("input",{type:"hidden",id:a,...t(d,{required:r})}),(0,s.jsxs)("div",{className:"flex gap-4 mt-2",children:[p&&"image"===j&&(0,s.jsx)(i(),{className:"rounded-lg",src:p,width:100,height:100,alt:""}),h&&"file"!==d&&(0,s.jsx)("div",{children:(0,s.jsx)(i(),{src:"".concat(l._n,"/").concat(h),width:100,height:100,alt:""})})]}),(null==c?void 0:c.type)==="required"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[a," tidak boleh kosong"]})]})}},2985:function(e,a,t){"use strict";var s=t(9268);t(6006),a.Z=e=>{let{label:a,register:t,required:l,name:r,minLength:i,maxLength:n,errors:d,valueAsNumber:o,type:c="text",readOnly:u,placeholder:x,autoComplete:m="on",addClass:h,value:p,labelCss:f="text-gray-700"}=e;return(0,s.jsxs)("div",{className:h,children:[(0,s.jsx)("label",{htmlFor:r,className:"text-sm tracking-wide ".concat(f),children:a}),l&&(0,s.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("input",{className:"".concat(u&&"cursor-not-allowed bg-gray-100"," w-full text-base px-4 py-2 border text-gray-700 border-gray-300 rounded-lg focus:outline-none focus:border-secondary"),type:c,id:r,readOnly:u,placeholder:x,autoComplete:m,...t(r,{required:l,minLength:i,maxLength:n,valueAsNumber:o}),value:p})}),(null==d?void 0:d.type)==="required"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[a," tidak boleh kosong"]}),(null==d?void 0:d.type)==="minLength"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[a," tidak boleh kurang dari ",i," karakter"]}),(null==d?void 0:d.type)==="maxLength"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[a," tidak boleh lebih dari ",n," karakter"]}),(null==d?void 0:d.type)==="pattern"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[a," hanya boleh angka."]})]})}},7808:function(e,a,t){"use strict";var s=t(9268);t(6006);var l=t(8136);a.Z=e=>{let{showModal:a,setShowModal:t,children:r,title:i,width:n=""}=e;return(0,s.jsx)("div",{className:"",children:a&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 mx-auto flex justify-center bg-black/[0.2]",children:(0,s.jsxs)("div",{className:"bg-white p-5 rounded-xl w-[500px] h-min mt-[10%] max-h-[70%] overflow-hidden flex flex-col lg:w-[700px]",style:{width:n},children:[(0,s.jsxs)("div",{className:"flex flex-row items-center justify-between border-b border-primary/[0.2] mb-4 pb-2",children:[(0,s.jsx)("h5",{className:"text-xl font-roboto",children:i}),(0,s.jsx)(l.C7Q,{className:"cursor-pointer hover:text-primary",onClick:()=>t(!1)})]}),(0,s.jsx)("div",{className:"overflow-auto",children:r})]})})})}},686:function(e,a,t){"use strict";var s=t(9268);t(6006);var l=t(8136);a.Z=e=>{let{showDel:a,setShowDel:t,setDelete:r}=e;return a&&(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"fixed inset-0 z-50 mx-auto flex justify-center bg-black/[0.2]",children:(0,s.jsxs)("div",{className:"bg-white p-5 rounded-xl lg:ml-64 md:min-w-[500px] h-min mt-[20%] max-h-[70%] overflow-auto",children:[(0,s.jsxs)("div",{className:"flex flex-row items-center justify-between border-b border-primary/[0.1] mb-4 pb-2",children:[(0,s.jsx)("h5",{className:"text-xl font-roboto",children:"Hapus Data"}),(0,s.jsx)(l.C7Q,{className:"cursor-pointer hover:text-black/[0.5]",onClick:()=>t(!1)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{children:"Apaka Anda Yakin Menghapus Data Ini?"}),(0,s.jsxs)("div",{className:"flex justify-center gap-4 mt-4",children:[(0,s.jsx)("button",{className:"hover:border hover:border-red-600 bg-red-600 w-20 py-2 rounded-xl text-white ",onClick:()=>r({isDelete:!0}),children:"Hapus"}),(0,s.jsx)("button",{className:"w-20 py-2 rounded-xl hover:border-b",onClick:()=>t(!1),children:"Batal"})]})]})]})})})}},1281:function(e,a,t){"use strict";t.d(a,{u:function(){return l}});var s=t(9268);t(6006);let l=e=>{let{label:a,register:t,required:l,name:r,placeholder:i,defaultOption:n,options:d=[],errors:o,addClass:c}=e;return(0,s.jsxs)("div",{className:c,children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:a}),l&&(0,s.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsxs)("select",{className:"w-full rounded-lg py-2 px-2 bg-white border border-gray-300 focus:outline-none focus:border-secondary",id:a,placeholder:i,...t(r,{required:l}),children:[(0,s.jsx)("option",{value:"",children:n}),d.map((e,a)=>(0,s.jsx)("option",{value:e.value,children:e.label},a))]})}),(null==o?void 0:o.type)==="required"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[a," tidak boleh kosong"]})]})}}},function(e){e.O(0,[6680,4550,4288,2772,1092,3088,6808,9276,9253,7698,1744],function(){return e(e.s=4489)}),_N_E=e.O()}]);