(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3230],{4489:function(e,a,s){Promise.resolve().then(s.bind(s,6791))},6791:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return V}});var l=s(9268),t=s(6006),n=s(593),r=s(5437),i=s(3346),d=s(769),o=s(6008),c=s(3415);let u=(e,a)=>"string"==typeof a?a:"object"==typeof a&&"path"in a?e[a.path]:"";var m=e=>{let{data:a,pictures:s,title:l,description:t,width:n,height:r}=e,i=[];return null==a||a.forEach((e,a)=>{s.forEach(s=>{e[s]&&i.push({src:"".concat(c._n,"/").concat(e[s]),title:u(e,l),description:u(e,t),width:n||3840,height:r||5760,identifier:"".concat(a,"-").concat(s)})})}),i},h=s(1023);s(7354);var x=s(8293),f=s(6519);s(3728),s(5918),s(142);var p=e=>{let{index:a,setIndex:s,slides:t}=e,n=null==t?void 0:t.findIndex(e=>e.identifier===a);return(0,l.jsx)(h.ZP,{index:n>=0?n:0,slides:t,open:n>=0,close:()=>s("-1"),plugins:[x.Z,f.Z]})},j=e=>{let{setDelete:a,setEdit:s,search:c}=e,u=(0,o.useSearchParams)(),h=u.get("berita_acara_id")||"",{setDetBeritaAcara:x,dtDetBeritaAcara:f}=(0,d.Z)(),[j,v]=(0,t.useState)(1),[g,b]=(0,t.useState)(10),[w,_]=(0,t.useState)(!0),[y,S]=(0,t.useState)(),[k,N]=(0,t.useState)("-1"),Z=async()=>{await x({page:j,limit:g,search:c,berita_acara_id:h}),_(!1)};return(0,t.useEffect)(()=>(Z(),()=>{}),[j,g]),(0,t.useEffect)(()=>{v(1),Z()},[c]),(0,t.useEffect)(()=>{S(m({data:null==f?void 0:f.data,pictures:["foto","paraf_mhs","paraf_dosen","paraf_pemeriksa"],title:{path:"materi"},description:{path:"tgl"}}))},[null==f?void 0:f.data]),(0,l.jsxs)("div",{className:"flex-1 flex-col max-w-full h-full overflow-auto",children:[(0,l.jsx)(p,{index:k,setIndex:N,slides:y}),w?(0,l.jsx)(n.Z,{}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"",children:(0,l.jsx)(i.Z,{headTable:["No","Tgl. Pertemuan","Materi","Jumlah MHS","Sistem Belajar","Paraf MHS","Paraf Dosen","Paraf Pemeriksa","Foto","Aksi"],tableBodies:["tgl","materi","jmlh_mhs","sistem","paraf_mhs","paraf_dosen","paraf_pemeriksa","foto"],dataTable:f.data,page:j,limit:g,setEdit:s,setDelete:a,ubah:!0,hapus:!0,setIndexBox:N})}),(null==f?void 0:f.last_page)>1&&(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsx)(r.Z,{currentPage:null==f?void 0:f.current_page,totalPages:null==f?void 0:f.last_page,setPage:v})})]})]})},v=s(2985),g=s(7808),b=s(9442),w=s(9700),_=s(5131),y=s(9977),S=s.n(y),k=s(5326),N=s.n(k);s(6760);var Z=e=>{let{control:a,required:s,name:n,errors:r,addClass:i,label:d,initialValue:o,includeDateIntervals:c}=e,[u,m]=(0,t.useState)(null),[h,x]=(0,t.useState)(o||"");return(0,t.useEffect)(()=>{"undefined"!=typeof document&&m(document.body)},[]),(0,l.jsxs)("div",{className:"flex flex-col ".concat(i),children:[(0,l.jsxs)("label",{className:"text-sm font-medium text-gray-700 tracking-wide block",children:[d,s&&(0,l.jsx)("span",{className:"ml-1 text-red-600",children:"*"})]}),(0,l.jsx)(w.Qr,{name:n,control:a,rules:{required:s},render:e=>{let{field:a}=e;return(0,l.jsx)(S(),{selected:h,onChange:e=>{if(e){x(e);let s=N()(e).format("YYYY-MM-DD");a.onChange(s)}else x(""),a.onChange("")},dateFormat:"dd/MM/yyyy",peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",className:"w-full border rounded-lg py-2 px-4 bg-white",includeDateIntervals:c,placeholderText:"dd/mm/yyyy",portalId:u})}}),(null==r?void 0:r.type)==="required"&&(0,l.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[d," tidak boleh kosong"]})]})},D=s(63),M=s(9247),P=s(9099),C=(e,a)=>{let s=(0,P.w)().subtract(e,"days").toDate(),l=(0,P.w)().add(a,"days").toDate();return[{start:s,end:l}]},E=e=>{let{register:a,errors:s,control:t,dtEdit:n,watch:r,setValue:i,showModal:d}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Z,{label:"Tgl. Berita Acara",name:"tgl",control:t,required:!0,errors:s.tgl,addClass:"col-span-4 lg:col-span-2",includeDateIntervals:C(130,10)}),(0,l.jsx)(v.Z,{label:"Jumlah MHS",name:"jmlh_mhs",register:a,required:!0,errors:s.jmlh_mhs,type:"number",addClass:"col-span-4 lg:col-span-2"}),(0,l.jsx)(v.Z,{label:"Materi (Kuliah Perpertemuan)",name:"materi",register:a,required:!0,errors:s.materi,addClass:"col-span-4"}),(0,l.jsx)(M.Z,{label:"Sistem Belajar",placeholder:"Pilih Sistem Belajar",control:t,errors:s,name:"sistem",options:[{value:"Daring",label:"Daring (Online)"},{value:"Luring",label:"Luring (Tatap Muka)"}],addClass:"col-span-4"}),(0,l.jsx)(_.Z,{watch:r,control:t,name:"paraf_mhs",label:"Paraf Mhs",required:!n,errors:s.paraf_mhs,setValue:i,clear:!0,addClass:"col-span-4 lg:col-span-2"}),(0,l.jsx)(_.Z,{control:t,name:"paraf_dosen",label:"Paraf Dosen",required:!n,errors:s.paraf_dosen,setValue:i,clear:!0,watch:r,addClass:"col-span-4 lg:col-span-2"}),(0,l.jsx)(D.Z,{label:"Foto (Aktivitas BBM di Kelas)",name:"foto",register:a,accept:"image/*",required:!0,errors:s.foto,addClass:"col-span-4",setValue:i,initialValue:(null==n?void 0:n.foto)||"",watch:r})]})},T=s(541),F=e=>{let{showModal:a,setShowModal:s,dtEdit:r}=e,i=(0,o.useSearchParams)(),c=i.get("berita_acara_id")||"",[u,m]=(0,t.useState)(!1),{addData:h,updateData:x}=(0,d.Z)(),{register:f,handleSubmit:p,setValue:j,control:_,formState:{errors:y},watch:S}=(0,w.cI)(),k=()=>{j("id",""),j("materi",""),j("jmlh_mhs",""),j("tgl",""),j("foto",""),j("paraf_dosen",""),j("paraf_mhs",""),j("paraf_pemeriksa","")};(0,t.useEffect)(()=>{r?(j("id",r.id),j("materi",r.materi),j("jmlh_mhs",r.jmlh_mhs),j("tgl",r.tgl),j("foto",r.foto),j("sistem",r.sistem)):k()},[a,r]);let N=async e=>{if(m(!0),e.berita_acara_id=c,r){let{data:a}=await x(r.id,e);(0,b.Z)({event:a}),s(!1)}else{let{data:a}=await h(e);console.log({data:a}),(0,b.Z)({event:a}),(null==a?void 0:a.type)!=="success"||k()}m(!1)};return(0,l.jsx)(g.Z,{title:"Form Dosen",showModal:a,setShowModal:s,children:(0,l.jsxs)("form",{onSubmit:p(N),children:[(0,l.jsx)(v.Z,{name:"id",register:f,type:"hidden"}),(0,l.jsx)("div",{className:"grid grid-cols-4 gap-2 mb-4",children:(0,l.jsx)(E,{register:f,errors:y,dtEdit:r,control:_,watch:S,setValue:j,showModal:a})}),(0,l.jsx)("div",{children:u?(0,l.jsx)(n.Z,{}):(0,l.jsx)(T.Z,{onClick:p(N),children:"Simpan"})})]})})},q=s(686),B=s(8919),I=s(8947),K=s(7304),A=s(1468),V=()=>{var e,a,s,r,i;let{removeData:u,showDetBeritaAcara:m}=(0,d.Z)(),{setShowJadwal:h,dtJadwal:x}=(0,A.Z)(),f=(0,o.useSearchParams)(),p=f.get("berita_acara_id")||"",v=f.get("jadwal_id")||"",[g,_]=(0,t.useState)(!1),[y,S]=(0,t.useState)(!1),[k,N]=(0,t.useState)(),[Z,D]=(0,t.useState)(),[M,P]=(0,t.useState)(""),[C,E]=(0,t.useState)(!1),[V,Y]=(0,t.useState)(""),O=async e=>{let{id:a,isDelete:s}=e;if(N(a),s){let{data:e}=await u(k);(0,b.Z)({event:e}),S(!1)}else S(!0)};(0,t.useEffect)(()=>(h(v),()=>{}),[v,h]);let{register:L,control:R,formState:{errors:H},watch:G,setValue:J}=(0,w.cI)(),Q=e=>{let a=new Date().getFullYear();"Ganjil"===e?Y("".concat(a,"-").concat(a+1)):"Genap"===e&&Y("".concat(a-1,"-").concat(a))};return(0,t.useEffect)(()=>{Q(null==x?void 0:x.semester)},[null==x?void 0:x.semester]),(0,l.jsxs)("div",{className:"flex flex-col h-full",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(B.Toaster,{}),(0,l.jsx)(F,{dtEdit:Z,showModal:g,setShowModal:_}),(0,l.jsx)(q.Z,{showDel:y,setShowDel:S,setDelete:O}),(0,l.jsxs)("div",{className:"mb-4 flex flex-col-reverse justify-between md:flex-row",children:[(0,l.jsxs)("div",{className:"flex flex-col w-full",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"w-32 inline-block uppercase",children:"Dosen"}),(0,l.jsxs)("span",{children:[": ",null==x?void 0:null===(e=x.dosen)||void 0===e?void 0:e.nama]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"w-32 inline-block uppercase",children:"KODE MK"}),(0,l.jsxs)("span",{children:[": ",null==x?void 0:null===(a=x.matkul)||void 0===a?void 0:a.kode]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"w-32 inline-block uppercase",children:"Mata Kuliah"}),(0,l.jsxs)("span",{children:[": ",null==x?void 0:null===(s=x.matkul)||void 0===s?void 0:s.nama]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"w-32 inline-block uppercase",children:"SKS/SMT/KLS"}),(0,l.jsxs)("span",{children:[": ",null==x?void 0:null===(r=x.matkul)||void 0===r?void 0:r.sks," / ",null==x?void 0:x.semester," T.A"," ",V]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"w-32 inline-block uppercase",children:"Ruangan"}),(0,l.jsxs)("span",{children:[": ",null==x?void 0:null===(i=x.ruangan)||void 0===i?void 0:i.kode]})]})]}),(0,l.jsx)("div",{className:"flex lg:justify-normal flex-col gap-4",children:(0,l.jsxs)("div",{className:"flex gap-2 self-start md:w-64",children:[C?(0,l.jsx)(n.Z,{}):(0,l.jsx)(I.Z,{onClick:()=>{E(!0),window.open("".concat(c._n,"/pdf/berita-acara/").concat(p)),E(!1)},children:"Cetak"}),(0,l.jsx)(T.Z,{onClick:()=>{_(!0),D(null)},children:"Tambah"})]})})]}),(0,l.jsx)(K.Z,{placeholder:"Cari ".concat("Detail Berita Acara"),name:"cari",register:L,setValue:J,watch:G})]}),(0,l.jsx)(j,{setDelete:O,setEdit:e=>{_(!0),D(e)},search:M})]})}},63:function(e,a,s){"use strict";var l=s(9268),t=s(3415),n=s(6394),r=s.n(n),i=s(6006),d=s(5883),o=s.n(d);a.Z=e=>{let{label:a,register:s,required:n,name:d,errors:c,addClass:u,accept:m,setValue:h,fileEdit:x,initialValue:f,watch:p}=e,[j,v]=(0,i.useState)(),[g,b]=(0,i.useState)(f||""),w=p(d);(0,i.useEffect)(()=>{w||b("")},[w]);let _=e=>new Promise(()=>{if(e){var a;let s=(null==e?void 0:null===(a=e.type)||void 0===a?void 0:a.split("/"))||[],l=s[0];if("image"!==l)return y(e);o().imageFileResizer(e,1500,1500,s[1],80,0,e=>{y(e)},"file")}else y(null)}),y=e=>{var a;if(e){let a=new FileReader;a.readAsDataURL(e),a.onloadend=()=>{b(a.result)}}let s=(null==e?void 0:null===(a=e.type)||void 0===a?void 0:a.split("/"))||[];v(s[0]),h(d,e)};return(0,l.jsxs)("div",{className:u,children:[a&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:a}),n&&(0,l.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),!n&&(0,l.jsx)("span",{className:"ml-1 text-gray-500 text-sm",children:"(Optional)"})]}),(0,l.jsx)("input",{className:"w-full text-base px-4 py-2 border  border-gray-300 rounded-lg focus:outline-none focus:border-secondary",id:"fileInput",type:"file",accept:m,onChange:e=>{var a;let s=(null===(a=e.target)||void 0===a?void 0:a.files[0])||null;_(s)}}),(0,l.jsx)("input",{type:"hidden",id:a,...s(d,{required:n})}),(0,l.jsxs)("div",{className:"flex gap-4 mt-2",children:[g&&"image"===j&&(0,l.jsx)(r(),{className:"rounded-lg",src:g,width:100,height:100,alt:""}),x&&"file"!==d&&"file_materi"!==d&&(0,l.jsx)("div",{children:(0,l.jsx)(r(),{src:"".concat(t._n,"/").concat(x),width:100,height:100,alt:""})})]}),(null==c?void 0:c.type)==="required"&&(0,l.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[a," tidak boleh kosong"]})]})}},9247:function(e,a,s){"use strict";var l=s(9268),t=s(6006),n=s(480),r=s(9700);a.Z=e=>{let{label:a,control:s,required:i,name:d,errors:o,addClass:c,menuPosition:u="fixed",placeholder:m="Pilih Tahun",options:h=[]}=e,[x,f]=(0,t.useState)(null);return(0,t.useEffect)(()=>{"undefined"!=typeof document&&f(document.body)},[]),(0,l.jsxs)("div",{className:c,children:[a&&(0,l.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:a}),i&&(0,l.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),x&&(0,l.jsx)(r.Qr,{name:d,control:s,rules:{required:i},render:e=>{let{field:{onChange:a,value:s,name:t,ref:r}}=e;return(0,l.jsx)(n.ZP,{isClearable:!0,isSearchable:!0,options:h,placeholder:m,menuPosition:u,ref:r,value:s?h.find(e=>e.value===s):s,onChange:e=>a(e?e.value:e),menuPlacement:"auto",menuPortalTarget:document.body})}}),(null==o?void 0:o.type)==="required"&&(0,l.jsx)("p",{className:"text-red-500 font-inter italic text-sm",children:"Tahun tidak boleh kosong"})]})}},9099:function(e,a,s){"use strict";s.d(a,{w:function(){return t.a}});var l=s(5326),t=s.n(l);s(4215)},142:function(){}},function(e){e.O(0,[6680,4550,4288,1053,831,5243,3088,5724,2306,4272,3637,9253,7698,1744],function(){return e(e.s=4489)}),_N_E=e.O()}]);