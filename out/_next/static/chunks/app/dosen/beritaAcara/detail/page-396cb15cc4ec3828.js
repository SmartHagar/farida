(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3230],{4489:function(e,s,a){Promise.resolve().then(a.bind(a,2621))},2621:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return q}});var l=a(9268),t=a(6006),r=a(593),n=a(5437),i=a(3346),d=a(769),o=a(6008),c=e=>{let{setDelete:s,setEdit:a,search:c}=e,u=(0,o.useSearchParams)(),x=u.get("berita_acara_id")||"",{setDetBeritaAcara:m,dtDetBeritaAcara:h}=(0,d.Z)(),[j,p]=(0,t.useState)(1),[f,v]=(0,t.useState)(10),[g,b]=(0,t.useState)(!0),w=async()=>{await m({page:j,limit:f,search:c,berita_acara_id:x}),b(!1)};return(0,t.useEffect)(()=>(w(),()=>{}),[j,f]),(0,t.useEffect)(()=>{p(1),w()},[c]),(0,l.jsx)("div",{className:"flex-1 flex-col max-w-full h-full overflow-auto",children:g?(0,l.jsx)(r.Z,{}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"",children:(0,l.jsx)(i.Z,{headTable:["No","Tgl. Pertemuan","Materi","Jumlah MHS","Sistem Belajar","Foto","Aksi"],tableBodies:["tgl","materi","jmlh_mhs","sistem","foto"],dataTable:h.data,page:j,limit:f,setEdit:a,setDelete:s,ubah:!0,hapus:!0})}),(null==h?void 0:h.last_page)>1&&(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsx)(n.Z,{currentPage:null==h?void 0:h.current_page,totalPages:null==h?void 0:h.last_page,setPage:p})})]})})},u=a(366),x=a(2985),m=a(7808),h=a(9442),j=a(9700),p=a(9977),f=a.n(p),v=a(5326),g=a.n(v),b=e=>{let{control:s,required:a,name:t,errors:r,addClass:n,label:i,startDate:d,setStartDate:o,includeDateIntervals:c}=e;return(0,l.jsxs)("div",{className:n,children:[(0,l.jsxs)("label",{className:"text-sm font-medium text-gray-700 tracking-wide block",children:[i,a&&(0,l.jsx)("span",{className:"ml-1 text-red-600",children:"*"})]}),(0,l.jsx)(j.Qr,{name:t,control:s,rules:{required:a},render:e=>{let{field:s}=e;return(0,l.jsx)(f(),{selected:d,onChange:e=>{if(e){o(e);let a=g()(e).format("YYYY-MM-DD");s.onChange(a)}else o(null),s.onChange("")},dateFormat:"dd/MM/yyyy",value:d||"",peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",className:"w-full border rounded-lg py-2 px-4",includeDateIntervals:c,placeholderText:"dd/mm/yyyy"})}}),(null==r?void 0:r.type)==="required"&&(0,l.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[i," tidak boleh kosong"]})]})},w=a(63),N=a(1281);a(6760);var y=e=>{var s;let{register:a,errors:t,control:r,dtEdit:n,watch:i,setValue:d,showModal:o,tgl:c,setTgl:u,myFile:m,setMyFile:h}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(b,{label:"Tgl. Berita Acara",name:"tgl",control:r,startDate:c,setStartDate:u,required:!0,errors:t.tgl,addClass:"col-span-4 lg:col-span-2",includeDateIntervals:[{start:(s=new Date,new Date(s.getTime()-1728e7)),end:new Date}]}),(0,l.jsx)(x.Z,{label:"Jumlah MHS",name:"jmlh_mhs",register:a,required:!0,errors:t.jmlh_mhs,type:"number",addClass:"col-span-4 lg:col-span-2"}),(0,l.jsx)(x.Z,{label:"Materi (Kuliah Perpertemuan)",name:"materi",register:a,required:!0,errors:t.materi,addClass:"col-span-4"}),(0,l.jsx)(N.u,{label:"Sistem Belajar",defaultOption:"Pilih Sistem Belajar",register:a,errors:t,name:"sistem",options:[{value:"Daring",label:"Daring (Online)"},{value:"Luring",label:"Luring (Tatap Muka)"}],addClass:"col-span-4"}),(0,l.jsx)(w.Z,{label:"Foto (Aktivitas BBM di Kelas)",name:"foto",register:a,accept:"image/*",required:!0,errors:t.foto,addClass:"col-span-4",setValue:d,fileEdit:null==n?void 0:n.foto,myFile:m,setMyFile:h})]})},k=e=>{let{showModal:s,setShowModal:a,dtEdit:n}=e,i=(0,o.useSearchParams)(),c=i.get("berita_acara_id")||"",[p,f]=(0,t.useState)(new Date("01-01-1980")),[v,g]=(0,t.useState)(),[b,w]=(0,t.useState)(!1),{addData:N,updateData:k}=(0,d.Z)(),{register:S,handleSubmit:C,setValue:D,control:_,formState:{errors:Z},watch:M}=(0,j.cI)(),P=()=>{D("id",""),D("materi",""),D("jmlh_mhs",""),D("tgl",""),D("foto",""),f(""),g(null)};(0,t.useEffect)(()=>{n?(D("id",n.id),D("materi",n.materi),D("jmlh_mhs",n.jmlh_mhs),D("tgl",n.tgl),f(new Date(n.tgl)),D("foto",n.foto),D("sistem",n.sistem)):P()},[s,n]);let E=async e=>{if(w(!0),e.berita_acara_id=c,console.log({row:e}),n){let{data:s}=await k(n.id,e);(0,h.Z)({event:s}),a(!1)}else{let{data:s}=await N(e);console.log({data:s}),(0,h.Z)({event:s}),(null==s?void 0:s.type)!=="success"||P()}w(!1)};return(0,l.jsx)(m.Z,{title:"Form Dosen",showModal:s,setShowModal:a,children:(0,l.jsxs)("form",{onSubmit:C(E),children:[(0,l.jsx)(x.Z,{name:"id",register:S,type:"hidden"}),(0,l.jsx)("div",{className:"grid grid-cols-4 gap-2 mb-4",children:(0,l.jsx)(y,{register:S,errors:Z,dtEdit:n,control:_,watch:M,setValue:D,showModal:s,myFile:v,setMyFile:g,tgl:p,setTgl:f})}),(0,l.jsx)("div",{children:b?(0,l.jsx)(r.Z,{}):(0,l.jsx)(u.Z,{text:"Simpan",onClick:C(E)})})]})})},S=a(686),C=a(8919),D=a(8350),_=a(3415),Z=a(1468),M=a(3371),P=a.n(M),E=e=>{let{text:s,onClick:a,addClass:t}=e;return(0,l.jsx)("button",{onClick:a,className:"bg-secondary rounded-lg px-4 py-2 text-white w-fit cursor-pointer hover:shadow-sm hover:shadow-secondary ".concat(t),children:s})},F=e=>{let{control:s,required:a,name:r,errors:n,addClass:i,label:d,clear:o=!1,setValue:c}=e,u=(0,t.useRef)(null),x=e=>e?e.getTrimmedCanvas().toDataURL("image/png"):null;return(0,l.jsxs)("div",{className:i,children:[(0,l.jsxs)("label",{className:"text-sm font-medium text-gray-700 tracking-wide block",children:[d,a&&(0,l.jsx)("span",{className:"ml-1 text-red-600",children:"*"})]}),(0,l.jsx)(j.Qr,{name:r,control:s,rules:{required:a},render:e=>{let{field:s}=e;return(0,l.jsx)(P(),{penColor:"blue",canvasProps:{className:"sigCanvas border border-black w-full rounded-xl"},ref:e=>{u.current=e},onEnd:()=>s.onChange(x(u.current))})}}),o&&(0,l.jsx)(E,{text:"Hapus ".concat(d),onClick:()=>{u.current&&(c(r,""),u.current.clear())},addClass:"mt-2"}),(null==n?void 0:n.type)==="required"&&(0,l.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[d," tidak boleh kosong"]})]})},T=e=>{let[s,a]=(0,t.useState)(!1),[r,n]=(0,t.useState)(!1),[i,d]=(0,t.useState)(""),c=(0,o.useSearchParams)(),x=c.get("berita_acara_id")||"";c.get("jadwal_id");let{register:h,handleSubmit:p,setValue:f,control:v,formState:{errors:g},watch:b,reset:w}=(0,j.cI)(),N=async e=>{e.berita_acara_id=x,console.log({row:e})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.Z,{text:"Paraf Dosen",addClass:"self-end",onClick:()=>{a(!0),d("Dosen")}}),(0,l.jsx)(u.Z,{text:"Paraf Mhs",addClass:"self-end",onClick:()=>{a(!0),d("Mahasiswa")}}),(0,l.jsxs)(m.Z,{title:"Paraf",showModal:s,setShowModal:a,width:"300px",children:[(0,l.jsx)("div",{children:(0,l.jsx)(F,{control:v,name:"paraf",label:"Paraf ".concat(i),required:!0,errors:g.paraf,setValue:f,clear:!0})}),(0,l.jsx)("div",{className:"flex gap-4 mt-4",children:(0,l.jsx)(u.Z,{text:"Simpan",onClick:p(N)})})]})]})},q=()=>{var e,s,a,n,i;let{removeData:x,showDetBeritaAcara:m}=(0,d.Z)(),{setShowJadwal:j,dtJadwal:p}=(0,Z.Z)(),f=(0,o.useSearchParams)(),v=f.get("berita_acara_id")||"",g=f.get("jadwal_id")||"",[b,w]=(0,t.useState)(!1),[N,y]=(0,t.useState)(!1),[M,P]=(0,t.useState)(),[E,F]=(0,t.useState)(),[q,B]=(0,t.useState)(""),[A,K]=(0,t.useState)(!1),L=async e=>{let{id:s,isDelete:a}=e;if(P(s),a){let{data:e}=await x(M);(0,h.Z)({event:e}),y(!1)}else y(!0)};return(0,t.useEffect)(()=>(j(g),()=>{}),[g,j]),(0,l.jsxs)("div",{className:"flex flex-col h-full",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(C.Toaster,{}),(0,l.jsx)(k,{dtEdit:E,showModal:b,setShowModal:w}),(0,l.jsx)(S.Z,{showDel:N,setShowDel:y,setDelete:L}),(0,l.jsxs)("div",{className:"mb-4 flex flex-col-reverse justify-between md:flex-row",children:[(0,l.jsxs)("div",{className:"flex flex-col w-full",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"w-32 inline-block uppercase",children:"Dosen"}),(0,l.jsxs)("span",{children:[": ",null==p?void 0:null===(e=p.dosen)||void 0===e?void 0:e.nama]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"w-32 inline-block uppercase",children:"KODE MK"}),(0,l.jsxs)("span",{children:[": ",null==p?void 0:null===(s=p.matkul)||void 0===s?void 0:s.kode]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"w-32 inline-block uppercase",children:"Mata Kuliah"}),(0,l.jsxs)("span",{children:[": ",null==p?void 0:null===(a=p.matkul)||void 0===a?void 0:a.nama]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"w-32 inline-block uppercase",children:"SKS/SMT/KLS"}),(0,l.jsxs)("span",{children:[": ",null==p?void 0:null===(n=p.matkul)||void 0===n?void 0:n.sks," / ",null==p?void 0:p.semester," T.A 2023/2024"]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"w-32 inline-block uppercase",children:"Ruangan"}),(0,l.jsxs)("span",{children:[": ",null==p?void 0:null===(i=p.ruangan)||void 0===i?void 0:i.kode]})]})]}),(0,l.jsxs)("div",{className:"flex lg:justify-normal flex-col gap-4",children:[(0,l.jsxs)("div",{className:"flex gap-2 self-start md:w-64",children:[A?(0,l.jsx)(r.Z,{}):(0,l.jsx)(u.Z,{text:"Cetak",addClass:" bg-secondary",onClick:()=>{K(!0),window.open("".concat(_._n,"/pdf/berita-acara/").concat(v)),K(!1)}}),(0,l.jsx)(u.Z,{text:"Tambah Data",addClass:"",onClick:()=>{w(!0),F(null)}})]}),(0,l.jsx)("div",{className:"flex gap-2 self-start md:w-64",children:(0,l.jsx)(T,{})})]})]}),(0,l.jsx)(D.Z,{placeholder:"Cari Data",onChange:e=>B(e)})]}),(0,l.jsx)(c,{setDelete:L,setEdit:e=>{w(!0),F(e)},search:q})]})}},63:function(e,s,a){"use strict";var l=a(9268),t=a(3415),r=a(6394),n=a.n(r),i=a(6006),d=a(5883),o=a.n(d);s.Z=e=>{let{label:s,register:a,required:r,name:d,errors:c,addClass:u,accept:x,setValue:m,fileEdit:h,myFile:j,setMyFile:p}=e,[f,v]=(0,i.useState)(),g=e=>new Promise(()=>{if(e){var s;let a=(null==e?void 0:null===(s=e.type)||void 0===s?void 0:s.split("/"))||[],l=a[0];if("image"!==l)return b(e);console.log({splitType:a}),o().imageFileResizer(e,1500,1500,a[1],80,0,e=>{b(e)},"file")}else b(null)}),b=e=>{var s;if(e){let s=new FileReader;s.readAsDataURL(e),s.onloadend=()=>{p(s.result)}}let a=(null==e?void 0:null===(s=e.type)||void 0===s?void 0:s.split("/"))||[];v(a[0]),m(d,e)};return(0,l.jsxs)("div",{className:u,children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:s}),r&&(0,l.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,l.jsx)("input",{className:"w-full text-base px-4 py-2 border  border-gray-300 rounded-lg focus:outline-none focus:border-secondary",id:"fileInput",type:"file",accept:x,onChange:e=>{var s;let a=(null===(s=e.target)||void 0===s?void 0:s.files[0])||null;g(a)}}),(0,l.jsx)("input",{type:"hidden",id:s,...a(d,{required:r})}),(0,l.jsxs)("div",{className:"flex gap-4 mt-2",children:[j&&"image"===f&&(0,l.jsx)(n(),{className:"rounded-lg",src:j,width:100,height:100,alt:""}),h&&"file"!==d&&(0,l.jsx)("div",{children:(0,l.jsx)(n(),{src:"".concat(t._n,"/").concat(h),width:100,height:100,alt:""})})]}),(null==c?void 0:c.type)==="required"&&(0,l.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[s," tidak boleh kosong"]})]})}},2985:function(e,s,a){"use strict";var l=a(9268);a(6006),s.Z=e=>{let{label:s,register:a,required:t,name:r,minLength:n,maxLength:i,errors:d,valueAsNumber:o,type:c="text",readOnly:u,placeholder:x,autoComplete:m="on",addClass:h,value:j,labelCss:p="text-gray-700"}=e;return(0,l.jsxs)("div",{className:h,children:[(0,l.jsx)("label",{htmlFor:r,className:"text-sm tracking-wide ".concat(p),children:s}),t&&(0,l.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,l.jsx)("div",{className:"relative",children:(0,l.jsx)("input",{className:"".concat(u&&"cursor-not-allowed bg-gray-100"," w-full text-base px-4 py-2 border text-gray-700 border-gray-300 rounded-lg focus:outline-none focus:border-secondary"),type:c,id:r,readOnly:u,placeholder:x,autoComplete:m,...a(r,{required:t,minLength:n,maxLength:i,valueAsNumber:o}),value:j})}),(null==d?void 0:d.type)==="required"&&(0,l.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[s," tidak boleh kosong"]}),(null==d?void 0:d.type)==="minLength"&&(0,l.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[s," tidak boleh kurang dari ",n," karakter"]}),(null==d?void 0:d.type)==="maxLength"&&(0,l.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[s," tidak boleh lebih dari ",i," karakter"]}),(null==d?void 0:d.type)==="pattern"&&(0,l.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[s," hanya boleh angka."]})]})}},7808:function(e,s,a){"use strict";var l=a(9268);a(6006);var t=a(8136);s.Z=e=>{let{showModal:s,setShowModal:a,children:r,title:n,width:i=""}=e;return(0,l.jsx)("div",{className:"",children:s&&(0,l.jsx)("div",{className:"fixed inset-0 z-50 mx-auto flex justify-center bg-black/[0.2]",children:(0,l.jsxs)("div",{className:"bg-white p-5 rounded-xl w-[500px] h-min mt-[10%] max-h-[70%] overflow-hidden flex flex-col lg:w-[700px]",style:{width:i},children:[(0,l.jsxs)("div",{className:"flex flex-row items-center justify-between border-b border-primary/[0.2] mb-4 pb-2",children:[(0,l.jsx)("h5",{className:"text-xl font-roboto",children:n}),(0,l.jsx)(t.C7Q,{className:"cursor-pointer hover:text-primary",onClick:()=>a(!1)})]}),(0,l.jsx)("div",{className:"overflow-auto",children:r})]})})})}},686:function(e,s,a){"use strict";var l=a(9268);a(6006);var t=a(8136);s.Z=e=>{let{showDel:s,setShowDel:a,setDelete:r}=e;return s&&(0,l.jsx)("div",{children:(0,l.jsx)("div",{className:"fixed inset-0 z-50 mx-auto flex justify-center bg-black/[0.2]",children:(0,l.jsxs)("div",{className:"bg-white p-5 rounded-xl lg:ml-64 md:min-w-[500px] h-min mt-[20%] max-h-[70%] overflow-auto",children:[(0,l.jsxs)("div",{className:"flex flex-row items-center justify-between border-b border-primary/[0.1] mb-4 pb-2",children:[(0,l.jsx)("h5",{className:"text-xl font-roboto",children:"Hapus Data"}),(0,l.jsx)(t.C7Q,{className:"cursor-pointer hover:text-black/[0.5]",onClick:()=>a(!1)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{children:"Apaka Anda Yakin Menghapus Data Ini?"}),(0,l.jsxs)("div",{className:"flex justify-center gap-4 mt-4",children:[(0,l.jsx)("button",{className:"hover:border hover:border-red-600 bg-red-600 w-20 py-2 rounded-xl text-white ",onClick:()=>r({isDelete:!0}),children:"Hapus"}),(0,l.jsx)("button",{className:"w-20 py-2 rounded-xl hover:border-b",onClick:()=>a(!1),children:"Batal"})]})]})]})})})}},1281:function(e,s,a){"use strict";a.d(s,{u:function(){return t}});var l=a(9268);a(6006);let t=e=>{let{label:s,register:a,required:t,name:r,placeholder:n,defaultOption:i,options:d=[],errors:o,addClass:c}=e;return(0,l.jsxs)("div",{className:c,children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:s}),t&&(0,l.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,l.jsx)("div",{className:"relative",children:(0,l.jsxs)("select",{className:"w-full rounded-lg py-2 px-2 bg-white border border-gray-300 focus:outline-none focus:border-secondary",id:s,placeholder:n,...a(r,{required:t}),children:[(0,l.jsx)("option",{value:"",children:i}),d.map((e,s)=>(0,l.jsx)("option",{value:e.value,children:e.label},s))]})}),(null==o?void 0:o.type)==="required"&&(0,l.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[s," tidak boleh kosong"]})]})}}},function(e){e.O(0,[6680,4550,4288,2772,1092,3088,6808,9276,9253,7698,1744],function(){return e(e.s=4489)}),_N_E=e.O()}]);